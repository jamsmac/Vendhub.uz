# 25 — Авторизация и профиль пользователя

## Текущее состояние — НЕТ

Сайт полностью анонимный:
- Нет кнопки "Войти" / "Регистрация"
- Нет профиля пользователя
- Нет Telegram авторизации
- Бонусный баланс (25 000) — захардкожен, не привязан к аккаунту
- Избранное — в useState, теряется
- Корзина — в useState, теряется
- История заказов — отсутствует

---

## Что нужно спроектировать

### Способы авторизации

#### Вариант 1: Telegram Login (приоритет)
- Telegram Login Widget на сайте
- Или Telegram Mini App (WebApp.initData)
- Плюсы: 95%+ аудитории в Ташкенте используют Telegram
- Плюсы: не нужен пароль, телефон автоматически
- Данные: Telegram ID, имя, фото, телефон

#### Вариант 2: SMS OTP
- Ввод номера +998 XX XXX XX XX
- Код по SMS (4-6 цифр)
- Fallback если нет Telegram

#### Вариант 3: Гостевой режим
- Без регистрации: просмотр меню, карта
- Для заказа / бонусов — нужна авторизация

### Профиль пользователя

#### Данные профиля
- Имя (из Telegram или ввод)
- Телефон (из Telegram или ввод)
- Telegram ID
- Аватар (из Telegram)
- Язык (RU/UZ)
- Уровень лояльности
- Бонусный баланс
- Дата регистрации

#### Экран профиля (нужно создать)
- Аватар + имя
- Уровень + баланс бонусов
- Избранные товары
- История заказов
- Настройки уведомлений
- Язык
- Кнопка "Выйти"

### Что нужно решить

#### Авторизация
- [ ] Telegram Login Widget или Telegram Mini App?
- [ ] Обязательна ли авторизация для заказа?
- [ ] Нужен ли гостевой режим (просмотр без авторизации)?
- [ ] Где кнопка "Войти" — в header? Отдельный экран?
- [ ] Нужен ли onboarding после первого входа?

#### Профиль
- [ ] Нужна ли страница "Профиль" в навигации?
- [ ] Что показывать в профиле?
- [ ] Нужна ли смена телефона / имени?
- [ ] Привязка нескольких Telegram аккаунтов?
- [ ] Удаление аккаунта?

#### Сохранение данных
- [ ] Корзина: localStorage + синхронизация с сервером?
- [ ] Избранное: на сервере (привязка к Telegram ID)?
- [ ] Последний автомат: запоминать?
- [ ] Последний заказ: quick-repeat?

#### Безопасность
- [ ] JWT токены?
- [ ] Время жизни сессии?
- [ ] Rate limiting на заказы?
