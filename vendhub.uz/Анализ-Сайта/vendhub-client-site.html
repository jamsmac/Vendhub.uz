<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>VendHub ‚Äî Coffee &amp; Snacks | –¢–∞—à–∫–µ–Ω—Ç</title>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;800&family=DM+Sans:opsz,wght@9..40,300;9..40,400;9..40,500;9..40,600;9..40,700&display=swap" rel="stylesheet" />
<script>
tailwind.config = {
  theme: {
    extend: {
      fontFamily: {
        sans: ['DM Sans', 'system-ui', 'sans-serif'],
        display: ['Playfair Display', 'Georgia', 'serif'],
      },
      colors: {
        cream: '#FDF8F3',
        espresso: { DEFAULT:'#5D4037', light:'#795548', dark:'#3E2723', 50:'#EFEBE9' },
        caramel: { DEFAULT:'#D4A574', light:'#E8C9A8', dark:'#B8834A' },
        chocolate: '#2C1810',
        mint: { DEFAULT:'#7CB69D', light:'#E8F5E9' },
        foam: '#F5F0EB',
      }
    }
  }
}
</script>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'DM Sans', system-ui, sans-serif; background: #FDF8F3; color: #2C1810; }
  @keyframes fadeUp { from { opacity:0; transform:translateY(20px) } to { opacity:1; transform:translateY(0) } }
  @keyframes fadeIn { from { opacity:0 } to { opacity:1 } }
  @keyframes slideUp { from { transform:translateY(100%) } to { transform:translateY(0) } }
  @keyframes expand { from { opacity:0; max-height:0 } to { opacity:1; max-height:5000px } }
  @keyframes bounceIn { 0% { transform:scale(.9); opacity:0 } 50% { transform:scale(1.02) } 100% { transform:scale(1); opacity:1 } }
  .anim-fu { animation: fadeUp .45s ease-out both }
  .anim-fi { animation: fadeIn .35s ease-out both }
  .anim-su { animation: slideUp .35s cubic-bezier(.4,0,.2,1) }
  .anim-expand { animation: expand .35s ease-out; overflow: hidden }
  .anim-bounce { animation: bounceIn .4s ease-out both }
  .d1{animation-delay:.05s}.d2{animation-delay:.1s}.d3{animation-delay:.15s}.d4{animation-delay:.2s}.d5{animation-delay:.25s}.d6{animation-delay:.3s}
  .hover-lift { transition: all .25s cubic-bezier(.4,0,.2,1) }
  .hover-lift:hover { transform: translateY(-2px); box-shadow: 0 12px 28px -6px rgba(93,64,55,.1) }
  .scrollbar-hide::-webkit-scrollbar { display:none }
  .scrollbar-hide { -ms-overflow-style:none; scrollbar-width:none }
  .coffee-card { background: #fff; border-radius: 16px; padding: 16px; box-shadow: 0 4px 20px -4px rgba(93,64,55,.08), 0 2px 8px -2px rgba(93,64,55,.04); }
  .btn-espresso { background: linear-gradient(135deg, #5D4037 0%, #3E2723 100%); color: #FDF8F3; border-radius: 12px; font-weight: 600; box-shadow: 0 4px 14px -2px rgba(62,39,35,.35); transition: all .2s ease; }
  .btn-espresso:hover { transform: translateY(-1px); box-shadow: 0 6px 20px -2px rgba(62,39,35,.45); }
  .btn-espresso:active { transform: translateY(0) scale(.98); }
  .btn-caramel { background: linear-gradient(135deg, #D4A574 0%, #B8834A 100%); color: #fff; border-radius: 12px; font-weight: 600; box-shadow: 0 4px 14px -2px rgba(184,131,74,.35); transition: all .2s ease; }
  .btn-caramel:hover { transform: translateY(-1px); box-shadow: 0 6px 20px -2px rgba(184,131,74,.45); }
  .pill { padding: 8px 16px; border-radius: 9999px; font-size: 14px; font-weight: 500; transition: all .2s ease; cursor: pointer; border: none; }
  .pill.active { background: linear-gradient(135deg, #5D4037 0%, #3E2723 100%); color: #FDF8F3; box-shadow: 0 2px 8px -2px rgba(62,39,35,.3); }
  .pill:not(.active) { background: #F5F0EB; color: #5D4037; }
  .pill:not(.active):hover { background: #EDE5DD; }
  .price-tag { font-weight: 600; font-variant-numeric: tabular-nums; color: #5D4037; }
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect, useRef } = React;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// ICONS (inline SVG)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const I = ({d,s=20,c="",...p}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={c} {...p}><path d={d}/></svg>;
const StarFill = ({s=16,c=""}) => <svg width={s} height={s} viewBox="0 0 24 24" fill="#D4A574" stroke="#D4A574" strokeWidth="1.5" className={c}><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/></svg>;
const Ic = {
  coffee: p => <I {...p} d="M17 8h1a4 4 0 110 8h-1M3 8h14v9a4 4 0 01-4 4H7a4 4 0 01-4-4V8zM6 1v3M10 1v3M14 1v3"/>,
  mapPin: p => <I {...p} d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/>,
  search: p => <I {...p} d="M11 17.25a6.25 6.25 0 110-12.5 6.25 6.25 0 010 12.5zM21 21l-4.35-4.35"/>,
  gift: p => <I {...p} d="M20 12v10H4V12M2 7h20v5H2zM12 22V7M12 7H7.5a2.5 2.5 0 010-5C11 2 12 7 12 7zM12 7h4.5a2.5 2.5 0 000-5C13 2 12 7 12 7z"/>,
  chevR: p => <I {...p} d="M9 18l6-6-6-6"/>,
  chevD: p => <I {...p} d="M6 9l6 6 6-6"/>,
  x: p => <I {...p} d="M18 6L6 18M6 6l12 12"/>,
  menu: p => <I {...p} d="M3 12h18M3 6h18M3 18h18"/>,
  phone: p => <I {...p} d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72c.127.96.361 1.903.7 2.81a2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45c.907.339 1.85.573 2.81.7A2 2 0 0122 16.92z"/>,
  mail: p => <I {...p} d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2zM22 6l-10 7L2 6"/>,
  clock: p => <I {...p} d="M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10zM12 6v6l4 2"/>,
  plus: p => <I {...p} d="M12 5v14M5 12h14"/>,
  minus: p => <I {...p} d="M5 12h14"/>,
  check: p => <I {...p} d="M20 6L9 17l-5-5"/>,
  bag: p => <I {...p} d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4zM3 6h18M16 10a4 4 0 01-8 0"/>,
  crown: p => <I {...p} d="M2 20h20M4 20V10l4 4 4-8 4 8 4-4v10"/>,
  zap: p => <I {...p} d="M13 2L3 14h9l-1 10 10-12h-9l1-10z"/>,
  nav: p => <I {...p} d="M3 11l19-9-9 19-2-8-8-2z"/>,
  filter: p => <I {...p} d="M22 3H2l8 9.46V19l4 2v-8.54L22 3z"/>,
  users: p => <I {...p} d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2M9 11a4 4 0 100-8 4 4 0 000 8zM23 21v-2a4 4 0 00-3-3.87M16 3.13a4 4 0 010 7.75"/>,
  trend: p => <I {...p} d="M23 6l-9.5 9.5-5-5L1 18"/>,
  percent: p => <I {...p} d="M19 5L5 19M6.5 9a2.5 2.5 0 100-5 2.5 2.5 0 000 5zM17.5 20a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"/>,
  flame: p => <I {...p} d="M8.5 14.5A2.5 2.5 0 0011 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 11-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 002.5 2.5z"/>,
  drop: p => <I {...p} d="M12 2.69l5.66 5.66a8 8 0 11-11.31 0z"/>,
  heart: p => <I {...p} d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"/>,
  snowflake: p => <I {...p} d="M12 2v20M2 12h20M4.93 4.93l14.14 14.14M19.07 4.93L4.93 19.07M8 5l4 3 4-3M8 19l4-3 4 3M5 8l3 4-3 4M19 8l-3 4 3 4"/>,
  sun: p => <I {...p} d="M12 17a5 5 0 100-10 5 5 0 000 10zM12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>,
  sparkle: p => <I {...p} d="M12 3l2.5 7.5L22 12l-7.5 2.5L12 22l-2.5-7.5L2 12l7.5-2.5z"/>,
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// DATA
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

// Machine Types (from vendify-menu-maps)
const machineTypes = [
  {
    id:'coffee', name:'–ö–æ—Ñ–µ –ê–≤—Ç–æ–º–∞—Ç', icon:'‚òï', emoji:'‚òï',
    desc:'–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ—Ñ–µ–π–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç —Å –±–æ–ª—å—à–∏–º —ç–∫—Ä–∞–Ω–æ–º –∏ —à–∏—Ä–æ–∫–∏–º –≤—ã–±–æ—Ä–æ–º –Ω–∞–ø–∏—Ç–∫–æ–≤',
    img:'images/opt/vending-machine.jpg',
    specs:[
      {label:'–≠–∫—Ä–∞–Ω', value:'–ë–æ–ª—å—à–æ–π —Ü–≤–µ—Ç–Ω–æ–π –¥–∏—Å–ø–ª–µ–π'},
      {label:'–ù–∞–ø–∏—Ç–∫–∏', value:'–≠—Å–ø—Ä–µ—Å—Å–æ, –ö–∞–ø—É—á–∏–Ω–æ, –õ–∞—Ç—Ç–µ, –ê–º–µ—Ä–∏–∫–∞–Ω–æ, –ö–∞–∫–∞–æ'},
      {label:'–ú–æ–ª–æ–∫–æ', value:'–°–≤–µ–∂–µ–µ –º–æ–ª–æ–∫–æ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–æ–π'},
      {label:'–°–∞—Ö–∞—Ä', value:'–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ'},
      {label:'–†–∞–∑–º–µ—Ä—ã', value:'–ú–∞–ª—ã–π, —Å—Ä–µ–¥–Ω–∏–π, –±–æ–ª—å—à–æ–π'},
      {label:'–û–ø–ª–∞—Ç–∞', value:'–ö–∞—Ä—Ç–∞, –Ω–∞–ª–∏—á–Ω—ã–µ, –±–µ—Å–∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –æ–ø–ª–∞—Ç–∞'},
    ],
  },
  {
    id:'snack', name:'–°–Ω—ç–∫ –ê–≤—Ç–æ–º–∞—Ç', icon:'üç™', emoji:'üç™',
    desc:'TCN –°–Ω—ç–∫ –ê–≤—Ç–æ–º–∞—Ç Big Screen —Å —à–∏—Ä–æ–∫–∏–º –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–æ–º –∑–∞–∫—É—Å–æ–∫ –∏ —Å–ª–∞–¥–æ—Å—Ç–µ–π',
    img:'images/snack-vending-machine.png',
    specs:[
      {label:'–≠–∫—Ä–∞–Ω', value:'–ë–æ–ª—å—à–æ–π —Ü–≤–µ—Ç–Ω–æ–π –¥–∏—Å–ø–ª–µ–π'},
      {label:'–ü—Ä–æ–¥—É–∫—Ç—ã', value:'–°–Ω–µ–∫–∏, —à–æ–∫–æ–ª–∞–¥, –ø–µ—á–µ–Ω—å–µ, —á–∏–ø—Å—ã, –±–∞—Ç–æ–Ω—á–∏–∫–∏'},
      {label:'–ü–æ–ª–∫–∏', value:'–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–æ–∫'},
      {label:'–î–∏–∑–∞–π–Ω', value:'–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ—Ä–ø—É—Å —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π'},
      {label:'–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å', value:'–°–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—Ç—ã –æ—Ç –∑–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞'},
      {label:'–û–ø–ª–∞—Ç–∞', value:'–ö–∞—Ä—Ç–∞, –Ω–∞–ª–∏—á–Ω—ã–µ, –±–µ—Å–∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –æ–ø–ª–∞—Ç–∞'},
      {label:'–ú–æ–¥–µ–ª—å', value:'TCN-CSC-8C V4.9'},
    ],
  },
  {
    id:'ice', name:'–•–æ–ª–æ–¥–Ω—ã–µ –ù–∞–ø–∏—Ç–∫–∏', icon:'üíß', emoji:'üßä',
    desc:'–ê–≤—Ç–æ–º–∞—Ç —Ö–æ–ª–æ–¥–Ω—ã—Ö –Ω–∞–ø–∏—Ç–∫–æ–≤ –∏ —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–æ–≤ ‚Äî –æ—Å–≤–µ–∂–∞—é—â–∏–µ –Ω–∞–ø–∏—Ç–∫–∏ 24/7',
    img:'images/ice-drinks-vending-machine.png',
    specs:[
      {label:'–°—Ç–∞—Ç—É—Å', value:'–°–∫–æ—Ä–æ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ'},
      {label:'–ù–∞–ø–∏—Ç–∫–∏', value:'–í–æ–¥–∞, —Å–æ–∫–∏, –≥–∞–∑–∏—Ä–æ–≤–∫–∞, —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏'},
      {label:'–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞', value:'–û—Ö–ª–∞–∂–¥–µ–Ω–∏–µ –¥–æ 4¬∞C'},
      {label:'–û–ø–ª–∞—Ç–∞', value:'–ö–∞—Ä—Ç–∞, –±–µ—Å–∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –æ–ø–ª–∞—Ç–∞'},
    ],
  },
];

const machines = [
  { id:'VM-001', name:'–¢–¶ –°–∞–º–∞—Ä–∫–∞–Ω–¥ –î–∞—Ä–≤–æ–∑–∞', addr:'—É–ª. –ö–∞—Ä—ã –ù–∏—è–∑–æ–≤–∞, 1', floor:'2 —ç—Ç–∞–∂', dist:0.3, status:'online', rating:4.8, reviews:156, promo:true, x:42, y:33, typeId:'coffee', is24h:true, productIds:[1,2,3,4,5,6,7,8,9,10,12,25,28] },
  { id:'VM-002', name:'–ë–¶ –ü–æ–π—Ç–∞—Ö—Ç', addr:'—É–ª. –ò—Å—Ç–∏–∫–±–æ–ª, 15', floor:'1 —ç—Ç–∞–∂', dist:0.8, status:'online', rating:4.6, reviews:89, promo:false, x:56, y:26, typeId:'coffee', is24h:true, productIds:[1,2,3,4,8,9,12,28] },
  { id:'VM-003', name:'INHA University', addr:'—É–ª. –ó–∏—ë–ª–∏–ª–∞—Ä, 9', floor:'–ì–ª–∞–≤–Ω–æ–µ –∑–¥–∞–Ω–∏–µ', dist:1.2, status:'offline', rating:4.5, reviews:234, promo:true, x:70, y:40, typeId:'snack', is24h:true, productIds:[19,20,21,22,23,24] },
  { id:'VM-004', name:'–ê—ç—Ä–æ–ø–æ—Ä—Ç –¢–∞—à–∫–µ–Ω—Ç', addr:'–¢–µ—Ä–º–∏–Ω–∞–ª 2', floor:'–ó–æ–Ω–∞ –≤—ã–ª–µ—Ç–∞', dist:8.5, status:'online', rating:4.7, reviews:312, promo:false, x:80, y:55, typeId:'coffee', is24h:true, productIds:[1,2,3,4,5,6,8,9,10,12,13,15,25,28] },
  { id:'VM-005', name:'–†–µ—Å–ø. –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∏–∏', addr:'—É–ª. –û—Å–∏—ë, 4', floor:'–§–æ–π–µ', dist:2.1, status:'online', rating:4.9, reviews:78, promo:true, x:30, y:50, typeId:'coffee', is24h:true, productIds:[1,2,3,4,8,12,13,28] },
  { id:'VM-006', name:'American Hospital', addr:'—É–ª. –ë–∞–±—É—Ä–∞', floor:'1 —ç—Ç–∞–∂', dist:3.4, status:'online', rating:4.8, reviews:145, promo:false, x:22, y:37, typeId:'coffee', is24h:true, productIds:[1,2,3,4,5,6,7,8,9,10,12,13,15,17,25,26,28] },
  { id:'VM-007', name:'IT Park Tashkent', addr:'—É–ª. –®–æ—Ç–∞ –†—É—Å—Ç–∞–≤–µ–ª–∏, 3', floor:'–§–æ–π–µ', dist:1.8, status:'online', rating:4.7, reviews:67, promo:true, x:50, y:60, typeId:'snack', is24h:false, productIds:[19,20,21,22,23,24] },
  { id:'VM-008', name:'KIUT', addr:'—É–ª. –õ–∞–±–∑–∞–∫, 2', floor:'–§–æ–π–µ 1-—ç—Ç–∞–∂', dist:2.5, status:'online', rating:4.6, reviews:112, promo:false, x:38, y:22, typeId:'ice', is24h:true, productIds:[19,20,21] },
];

// Options templates: vendify production schema ‚Äî all syrups included in base price (mod:0)
// Americano: 4 hot + 3 cold = 7 options
const americanoOpts = [
  {id:'hot_sugar',name:'—Å —Å–∞—Ö–∞—Ä–æ–º',mod:0,temp:'hot'},{id:'hot_no_sugar',name:'–±–µ–∑ —Å–∞—Ö–∞—Ä–∞',mod:0,temp:'hot'},
  {id:'hot_vanilla',name:'—Å –≤–∞–Ω–∏–ª—å–Ω—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'hot'},{id:'hot_caramel',name:'—Å –∫–∞—Ä–∞–º–µ–ª—å–Ω—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'hot'},
  {id:'ice_no_sugar',name:'–±–µ–∑ —Å–∞—Ö–∞—Ä–∞',mod:0,temp:'cold'},
  {id:'ice_vanilla',name:'—Å –≤–∞–Ω–∏–ª—å–Ω—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'cold'},{id:'ice_caramel',name:'—Å –∫–∞—Ä–∞–º–µ–ª—å–Ω—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'cold'},
];
// Cappuccino: 5 hot + 4 cold = 9 options (+ coconut)
const cappuccinoOpts = [
  {id:'hot_sugar',name:'—Å —Å–∞—Ö–∞—Ä–æ–º',mod:0,temp:'hot'},{id:'hot_no_sugar',name:'–±–µ–∑ —Å–∞—Ö–∞—Ä–∞',mod:0,temp:'hot'},
  {id:'hot_vanilla',name:'—Å –≤–∞–Ω–∏–ª—å–Ω—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'hot'},{id:'hot_caramel',name:'—Å –∫–∞—Ä–∞–º–µ–ª—å–Ω—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'hot'},
  {id:'hot_coconut',name:'—Å –∫–æ–∫–æ—Å–æ–≤—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'hot'},
  {id:'ice_no_sugar',name:'–±–µ–∑ —Å–∞—Ö–∞—Ä–∞',mod:0,temp:'cold'},
  {id:'ice_vanilla',name:'—Å –≤–∞–Ω–∏–ª—å–Ω—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'cold'},{id:'ice_caramel',name:'—Å –∫–∞—Ä–∞–º–µ–ª—å–Ω—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'cold'},
  {id:'ice_coconut',name:'—Å –∫–æ–∫–æ—Å–æ–≤—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'cold'},
];
// Latte: 5 hot + 4 cold = 9 options (+ coconut, golden ice)
const latteOpts = [
  {id:'hot_sugar',name:'—Å —Å–∞—Ö–∞—Ä–æ–º',mod:0,temp:'hot'},{id:'hot_no_sugar',name:'–±–µ–∑ —Å–∞—Ö–∞—Ä–∞',mod:0,temp:'hot'},
  {id:'hot_vanilla',name:'—Å –≤–∞–Ω–∏–ª—å–Ω—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'hot'},{id:'hot_caramel',name:'—Å –∫–∞—Ä–∞–º–µ–ª—å–Ω—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'hot'},
  {id:'hot_coconut',name:'—Å –∫–æ–∫–æ—Å–æ–≤—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'hot'},
  {id:'ice_golden',name:'¬´–ó–æ–ª–æ—Ç–æ–π Ice¬ª (–±–µ–∑ —Å–∞—Ö–∞—Ä–∞)',mod:0,temp:'cold'},
  {id:'ice_vanilla',name:'—Å –≤–∞–Ω–∏–ª—å–Ω—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'cold'},{id:'ice_caramel',name:'—Å –∫–∞—Ä–∞–º–µ–ª—å–Ω—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'cold'},
  {id:'ice_coconut',name:'—Å –∫–æ–∫–æ—Å–æ–≤—ã–º —Å–∏—Ä–æ–ø–æ–º',mod:0,temp:'cold'},
];
// Espresso: sugar only (2 options)
const espressoOpts = [{id:'with_sugar',name:'—Å —Å–∞—Ö–∞—Ä–æ–º',mod:0,temp:'hot'},{id:'without_sugar',name:'–±–µ–∑ —Å–∞—Ö–∞—Ä–∞',mod:0,temp:'hot'}];
// Classic only (1 option) ‚Äî Mocha, Flat White, Maccoffee, Cocoa
const classicOpt = [{id:'classic',name:'–∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π',mod:0,temp:'hot'}];
// Tea: hot/ice (2 options)
const teaOpts = [{id:'hot',name:'–≥–æ—Ä—è—á–∏–π',mod:0,temp:'hot'},{id:'ice',name:'—Å–æ –ª—å–¥–æ–º',mod:0,temp:'cold'}];
// Matcha: hot/ice classic
const matchaOpts = [{id:'hot',name:'–≥–æ—Ä—è—á–∏–π –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π',mod:0,temp:'hot'},{id:'ice',name:'—Ö–æ–ª–æ–¥–Ω—ã–π –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π',mod:0,temp:'cold'}];
// Ice cubes
const iceOpts = [{id:'ice_cube',name:'–∫—É–±–∏–∫–∏ –ª—å–¥–∞',mod:0,temp:'ice'}];

const products = [
  // ‚ïê‚ïê‚ïê COFFEE (vendify 1:1) ‚ïê‚ïê‚ïê
  { id:1, name:'–≠—Å–ø—Ä–µ—Å—Å–æ', cat:'coffee', temp:'hot', price:20000, rating:4.9, popular:true, desc:'–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –∏—Ç–∞–ª—å—è–Ω—Å–∫–∏–π —ç—Å–ø—Ä–µ—Å—Å–æ', caffeine:63, cal:5, vol:'30 –º–ª', ingredients:['–°–≤–µ–∂–µ–º–æ–ª–æ—Ç—ã–π –∫–æ—Ñ–µ','–í–æ–¥–∞ –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º'], emoji:'‚òï', img:'images/opt/espresso-card.jpg', options:espressoOpts },
  { id:2, name:'–ê–º–µ—Ä–∏–∫–∞–Ω–æ', cat:'coffee', temp:'hot', price:20000, rating:4.7, popular:true, desc:'–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —á—ë—Ä–Ω—ã–π –∫–æ—Ñ–µ', caffeine:150, cal:15, vol:'250 –º–ª', ingredients:['–î–≤–æ–π–Ω–æ–π —ç—Å–ø—Ä–µ—Å—Å–æ','–ì–æ—Ä—è—á–∞—è –≤–æ–¥–∞'], emoji:'‚òï', img:'images/opt/americano-card.jpg', options:americanoOpts },
  { id:3, name:'–ö–∞–ø—É—á–∏–Ω–æ', cat:'coffee', temp:'hot', price:20000, rating:4.8, popular:true, desc:'–≠—Å–ø—Ä–µ—Å—Å–æ —Å –º–æ–ª–æ—á–Ω–æ–π –ø–µ–Ω–∫–æ–π', caffeine:75, cal:120, vol:'250 –º–ª', ingredients:['–≠—Å–ø—Ä–µ—Å—Å–æ','–ú–æ–ª–æ–∫–æ','–ú–æ–ª–æ—á–Ω–∞—è –ø–µ–Ω–∫–∞'], emoji:'‚òï', img:'images/opt/cappuccino-card.jpg', options:cappuccinoOpts },
  { id:4, name:'–õ–∞—Ç—Ç–µ', cat:'coffee', temp:'hot', price:20000, rating:4.6, popular:true, desc:'–ù–µ–∂–Ω—ã–π –∫–æ—Ñ–µ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –º–æ–ª–æ–∫–∞', caffeine:63, cal:150, vol:'300 –º–ª', ingredients:['–≠—Å–ø—Ä–µ—Å—Å–æ','–ú–æ–ª–æ–∫–æ','–¢–æ–Ω–∫–∏–π —Å–ª–æ–π –ø–µ–Ω–∫–∏'], emoji:'‚òï', img:'images/opt/cappuccino-card.jpg', options:latteOpts },
  { id:5, name:'–ú–æ–∫–∫–æ', cat:'coffee', temp:'hot', price:25000, rating:4.7, popular:false, desc:'–≠—Å–ø—Ä–µ—Å—Å–æ —Å —à–æ–∫–æ–ª–∞–¥–æ–º –∏ –º–æ–ª–æ–∫–æ–º', caffeine:95, cal:200, vol:'300 –º–ª', ingredients:['–≠—Å–ø—Ä–µ—Å—Å–æ','–®–æ–∫–æ–ª–∞–¥','–ú–æ–ª–æ–∫–æ'], emoji:'‚òï', img:'images/opt/cappuccino-card.jpg', options:classicOpt },
  { id:25, name:'–§–ª—ç—Ç –£–∞–π—Ç', cat:'coffee', temp:'hot', price:25000, rating:4.8, popular:false, desc:'–î–≤–æ–π–Ω–æ–π —ç—Å–ø—Ä–µ—Å—Å–æ —Å –±–∞—Ä—Ö–∞—Ç–Ω—ã–º –º–æ–ª–æ–∫–æ–º', caffeine:130, cal:100, vol:'200 –º–ª', ingredients:['–î–≤–æ–π–Ω–æ–π —ç—Å–ø—Ä–µ—Å—Å–æ','–ú–∏–∫—Ä–æ–ø–µ–Ω–∞ –º–æ–ª–æ–∫–∞'], emoji:'‚òï', img:'images/opt/espresso-card.jpg', options:classicOpt },
  { id:28, name:'Maccoffee 3-–≤-1', cat:'coffee', temp:'hot', price:10000, rating:4.2, popular:false, desc:'–†–∞—Å—Ç–≤–æ—Ä–∏–º—ã–π –∫–æ—Ñ–µ 3 –≤ 1', caffeine:30, cal:80, vol:'200 –º–ª', ingredients:['–ö–æ—Ñ–µ','–°–∞—Ö–∞—Ä','–°–ª–∏–≤–∫–∏'], emoji:'‚òï', options:classicOpt },
  // ‚ïê‚ïê‚ïê VendHub exclusives ‚ïê‚ïê‚ïê
  { id:6, name:'–†–∞—Ñ –õ–∞–≤–∞–Ω–¥–∞', cat:'coffee', temp:'hot', price:28000, rating:4.9, popular:true, desc:'–§–∏—Ä–º–µ–Ω–Ω—ã–π —Ä–∞—Ñ —Å –ª–∞–≤–∞–Ω–¥–æ–π –∏ –≤–∞–Ω–∏–ª—å—é', caffeine:63, cal:180, vol:'300 –º–ª', ingredients:['–≠—Å–ø—Ä–µ—Å—Å–æ','–°–ª–∏–≤–∫–∏','–õ–∞–≤–∞–Ω–¥–∞','–í–∞–Ω–∏–ª—å'], emoji:'üíú', isNew:true, img:'images/opt/cappuccino-card.jpg', options:espressoOpts },
  { id:7, name:'–ü—Ä—è–Ω—ã–π –õ–∞—Ç—Ç–µ', cat:'coffee', temp:'hot', price:25000, rating:4.8, popular:false, desc:'–õ–∞—Ç—Ç–µ —Å –∫–æ—Ä–∏—Ü–µ–π, –∏–º–±–∏—Ä—ë–º –∏ –º—É—Å–∫–∞—Ç–æ–º', caffeine:63, cal:160, vol:'300 –º–ª', ingredients:['–≠—Å–ø—Ä–µ—Å—Å–æ','–ú–æ–ª–æ–∫–æ','–ö–æ—Ä–∏—Ü–∞','–ò–º–±–∏—Ä—å'], emoji:'üçÇ', isSeasonal:true, img:'images/opt/cappuccino-card.jpg', options:espressoOpts },
  { id:8, name:'–ê–π—Å –õ–∞—Ç—Ç–µ', cat:'coffee', temp:'cold', price:20000, rating:4.7, popular:true, desc:'–•–æ–ª–æ–¥–Ω—ã–π –ª–∞—Ç—Ç–µ —Å–æ –ª—å–¥–æ–º', caffeine:63, cal:140, vol:'350 –º–ª', ingredients:['–≠—Å–ø—Ä–µ—Å—Å–æ','–ú–æ–ª–æ–∫–æ','–õ—ë–¥'], emoji:'üßä', img:'images/opt/americano-card.jpg', options:latteOpts.filter(o=>o.temp==='cold') },
  { id:9, name:'–ê–π—Å –ê–º–µ—Ä–∏–∫–∞–Ω–æ', cat:'coffee', temp:'cold', price:20000, rating:4.5, popular:false, desc:'–•–æ–ª–æ–¥–Ω—ã–π –∞–º–µ—Ä–∏–∫–∞–Ω–æ —Å–æ –ª—å–¥–æ–º', caffeine:150, cal:10, vol:'300 –º–ª', ingredients:['–î–≤–æ–π–Ω–æ–π —ç—Å–ø—Ä–µ—Å—Å–æ','–•–æ–ª–æ–¥–Ω–∞—è –≤–æ–¥–∞','–õ—ë–¥'], emoji:'üßä', img:'images/opt/americano-card.jpg', options:americanoOpts.filter(o=>o.temp==='cold') },
  { id:10, name:'–ö–æ–ª–¥ –ë—Ä—é', cat:'coffee', temp:'cold', price:22000, rating:4.8, popular:false, desc:'–ö–æ—Ñ–µ —Ö–æ–ª–æ–¥–Ω–æ–≥–æ –∑–∞–≤–∞—Ä–∏–≤–∞–Ω–∏—è 12 —á–∞—Å–æ–≤', caffeine:200, cal:5, vol:'300 –º–ª', ingredients:['–ö–æ—Ñ–µ —Ö–æ–ª–æ–¥–Ω–æ–π —ç–∫—Å—Ç—Ä–∞–∫—Ü–∏–∏','–õ—ë–¥'], emoji:'üßä', img:'images/opt/americano-card.jpg', options:americanoOpts.filter(o=>o.temp==='cold') },
  { id:26, name:'–§—Ä–∞–ø–ø–µ', cat:'coffee', temp:'cold', price:26000, rating:4.6, popular:false, desc:'–õ–µ–¥—è–Ω–æ–π –∫–æ—Ñ–µ–π–Ω—ã–π –∫–æ–∫—Ç–µ–π–ª—å', caffeine:95, cal:210, vol:'400 –º–ª', ingredients:['–≠—Å–ø—Ä–µ—Å—Å–æ','–ú–æ–ª–æ–∫–æ','–õ—ë–¥','–°–∞—Ö–∞—Ä'], emoji:'üßä', isAvailable:false, img:'images/opt/americano-card.jpg' },
  // ‚ïê‚ïê‚ïê TEA (vendify 1:1) ‚ïê‚ïê‚ïê
  { id:13, name:'–ß–∞–π —Å –ª–∏–º–æ–Ω–æ–º', cat:'tea', temp:'hot', price:10000, rating:4.4, popular:false, desc:'–ß–∞–π —Å –ª–∏–º–æ–Ω–æ–º', caffeine:40, cal:2, vol:'250 –º–ª', ingredients:['–ß—ë—Ä–Ω—ã–π —á–∞–π','–õ–∏–º–æ–Ω','–ö–∏–ø—è—Ç–æ–∫'], emoji:'üçµ', options:teaOpts },
  { id:15, name:'–ß–∞–π —Ñ—Ä—É–∫—Ç–æ–≤—ã–π', cat:'tea', temp:'hot', price:15000, rating:4.6, popular:false, desc:'–ê—Ä–æ–º–∞—Ç–Ω—ã–π —Ñ—Ä—É–∫—Ç–æ–≤—ã–π —á–∞–π', caffeine:0, cal:15, vol:'250 –º–ª', ingredients:['–§—Ä—É–∫—Ç–æ–≤—ã–π –∫—É–ø–∞–∂','–ö–∏–ø—è—Ç–æ–∫'], emoji:'üçµ', options:teaOpts },
  // ‚ïê‚ïê‚ïê SPECIAL DRINKS (vendify 1:1) ‚ïê‚ïê‚ïê
  { id:12, name:'–ö–∞–∫–∞–æ', cat:'other', temp:'hot', price:15000, rating:4.8, popular:false, desc:'–ì–æ—Ä—è—á–∏–π –∫–∞–∫–∞–æ —Å –º–æ–ª–æ–∫–æ–º', caffeine:8, cal:180, vol:'250 –º–ª', ingredients:['–ö–∞–∫–∞–æ-–ø–æ—Ä–æ—à–æ–∫','–ú–æ–ª–æ–∫–æ','–°–∞—Ö–∞—Ä'], emoji:'üç´', img:'images/opt/cappuccino-card.jpg', options:classicOpt },
  { id:17, name:'–ú–∞—Ç—á–∞ –õ–∞—Ç—Ç–µ', cat:'tea', temp:'hot', price:30000, rating:4.7, popular:false, desc:'–Ø–ø–æ–Ω—Å–∫–∏–π —á–∞–π –º–∞—Ç—á–∞ —Å –º–æ–ª–æ–∫–æ–º', caffeine:70, cal:120, vol:'300 –º–ª', ingredients:['–ü–æ—Ä–æ—à–æ–∫ –º–∞—Ç—á–∞','–ú–æ–ª–æ–∫–æ'], emoji:'üçµ', isNew:true, options:matchaOpts },
  // ‚ïê‚ïê‚ïê SNACKS / DRINKS ‚ïê‚ïê‚ïê
  { id:19, name:'–í–æ–¥–∞', cat:'snack', temp:'cold', price:5000, rating:4.2, popular:false, desc:'–ü–∏—Ç—å–µ–≤–∞—è –≤–æ–¥–∞ 0.5–ª', caffeine:0, cal:0, vol:'500 –º–ª', ingredients:['–û—á–∏—â–µ–Ω–Ω–∞—è –≤–æ–¥–∞'], emoji:'üíß' },
  { id:20, name:'–ö–æ–ª–∞', cat:'snack', temp:'cold', price:8000, rating:4.3, popular:false, desc:'–ì–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫', caffeine:34, cal:140, vol:'330 –º–ª', ingredients:['–ì–∞–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–æ–¥–∞','–°–∞—Ö–∞—Ä','–ö–æ—Ñ–µ–∏–Ω'], emoji:'ü•§' },
  { id:21, name:'–°–æ–∫ –∞–ø–µ–ª—å—Å–∏–Ω', cat:'snack', temp:'cold', price:10000, rating:4.5, popular:false, desc:'–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–π –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π —Å–æ–∫', caffeine:0, cal:110, vol:'300 –º–ª', ingredients:['–ê–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π —Å–æ–∫'], emoji:'üçä' },
  { id:22, name:'–®–æ–∫–æ–ª–∞–¥–Ω—ã–π –±–∞—Ç–æ–Ω—á–∏–∫', cat:'snack', temp:null, price:7000, rating:4.4, popular:false, desc:'–ú–æ–ª–æ—á–Ω—ã–π —à–æ–∫–æ–ª–∞–¥ —Å –æ—Ä–µ—Ö–∞–º–∏', caffeine:0, cal:250, vol:'50 –≥', ingredients:['–®–æ–∫–æ–ª–∞–¥','–û—Ä–µ—Ö–∏','–ö–∞—Ä–∞–º–µ–ª—å'], emoji:'üç´' },
  { id:23, name:'–ß–∏–ø—Å—ã', cat:'snack', temp:null, price:8000, rating:4.1, popular:false, desc:'–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω—ã–µ —á–∏–ø—Å—ã', caffeine:0, cal:280, vol:'70 –≥', ingredients:['–ö–∞—Ä—Ç–æ—Ñ–µ–ª—å','–ú–∞—Å–ª–æ','–°–æ–ª—å'], emoji:'üçø' },
  { id:24, name:'–ö—Ä—É–∞—Å—Å–∞–Ω', cat:'snack', temp:null, price:12000, rating:4.6, popular:true, desc:'–°–≤–µ–∂–∏–π –∫—Ä—É–∞—Å—Å–∞–Ω —Å –º–∞—Å–ª–æ–º', caffeine:0, cal:230, vol:'65 –≥', ingredients:['–ú—É–∫–∞','–°–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ','–î—Ä–æ–∂–∂–∏'], emoji:'ü•ê' },
  { id:27, name:'–õ—ë–¥', cat:'other', temp:'ice', price:10000, rating:4.0, popular:false, desc:'–ö—É–±–∏–∫–∏ –ª—å–¥–∞ –¥–ª—è –ª—é–±–æ–≥–æ –Ω–∞–ø–∏—Ç–∫–∞', caffeine:0, cal:0, vol:'200 –≥', ingredients:['–û—á–∏—â–µ–Ω–Ω–∞—è –≤–æ–¥–∞'], emoji:'üßä', options:iceOpts },
];

const promos = [
  { id:1, type:'discount', title:'–°–∫–∏–¥–∫–∞ 20% –Ω–∞ –≤—Å—ë –º–µ–Ω—é', desc:'–ü—Ä–æ–º–æ–∫–æ–¥ COFFEE20 ‚Äî —Å–∫–∏–¥–∫–∞ –Ω–∞ –ª—é–±–æ–π –Ω–∞–ø–∏—Ç–æ–∫', until:'15 —è–Ω–≤', code:'COFFEE20', badge:'–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ', gradient:'bg-gradient-to-br from-red-500 to-rose-600', conds:['–î–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ –≤—Å–µ –Ω–∞–ø–∏—Ç–∫–∏','–ù–µ —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è —Å –¥—Ä—É–≥–∏–º–∏ –∞–∫—Ü–∏—è–º–∏','–û–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –∑–∞–∫–∞–∑'] },
  { id:2, type:'combo', title:'–ö–æ–º–±–æ: –ö–∞–ø—É—á–∏–Ω–æ + –ö—Ä—É–∞—Å—Å–∞–Ω', desc:'–õ—é–±–∏–º–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –ø–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ü–µ–Ω–µ. –≠–∫–æ–Ω–æ–º–∏—è 15 000 —Å—É–º', until:'31 —è–Ω–≤', badge:'–í—ã–≥–æ–¥–Ω–æ', gradient:'bg-gradient-to-br from-purple-500 to-violet-600', prices:{ old:45000, new:30000 }, conds:['–í–∫–ª—é—á–∞–µ—Ç –∫–∞–ø—É—á–∏–Ω–æ 300–º–ª','–í–∫–ª—é—á–∞–µ—Ç —Å–≤–µ–∂–∏–π –∫—Ä—É–∞—Å—Å–∞–Ω','–î–æ—Å—Ç—É–ø–Ω–æ –≤–æ –≤—Å–µ—Ö –∞–≤—Ç–æ–º–∞—Ç–∞—Ö'] },
  { id:3, type:'happy_hour', title:'Happy Hour: -30%', desc:'–ö–∞–∂–¥—ã–π –¥–µ–Ω—å 14:00-16:00 —Å–∫–∏–¥–∫–∞ 30% –Ω–∞ —Ö–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏', until:'–ï–∂–µ–¥–Ω–µ–≤–Ω–æ', badge:'–ï–∂–µ–¥–Ω–µ–≤–Ω–æ', gradient:'bg-gradient-to-br from-blue-500 to-indigo-600', conds:['–¢–æ–ª—å–∫–æ —Ö–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏','–° 14:00 –¥–æ 16:00','–í–æ –≤—Å–µ—Ö –∞–≤—Ç–æ–º–∞—Ç–∞—Ö'] },
  { id:4, type:'bonus', title:'x2 –±–æ–Ω—É—Å–æ–≤ –∑–∞ –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑', desc:'–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –¥–≤–æ–π–Ω—ã–µ –±–æ–Ω—É—Å—ã –∑–∞ –ø–µ—Ä–≤—ã–µ 3 –∑–∞–∫–∞–∑–∞!', until:'–ü–æ—Å—Ç–æ—è–Ω–Ω–æ', code:'WELCOME', badge:'–ù–æ–≤–∏—á–∫–∞–º', gradient:'bg-gradient-to-br from-amber-500 to-orange-600', conds:['–î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π','–ü–µ—Ä–≤—ã–µ 3 –∑–∞–∫–∞–∑–∞','–ë–æ–Ω—É—Å—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏'] },
  { id:5, type:'new', title:'–ù–æ–≤–∏–Ω–∫–∞: –†–∞—Ñ –õ–∞–≤–∞–Ω–¥–∞', desc:'–§–∏—Ä–º–µ–Ω–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫ —Å –ª–∞–≤–∞–Ω–¥–æ–π –∏ –≤–∞–Ω–∏–ª—å—é –ø–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Ü–µ–Ω–µ', until:'20 —è–Ω–≤', badge:'–ù–æ–≤–∏–Ω–∫–∞', gradient:'bg-gradient-to-br from-emerald-500 to-teal-600', prices:{ old:35000, new:28000 }, conds:['–ü–æ–∫–∞ –∑–∞–ø–∞—Å—ã –µ—Å—Ç—å','–î–æ—Å—Ç—É–ø–Ω–æ –≤ –∞–≤—Ç–æ–º–∞—Ç–∞—Ö —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º –º–µ–Ω—é'] },
  { id:6, type:'limited', title:'–ó–∏–º–Ω–∏–π —Å–µ–∑–æ–Ω: –ü—Ä—è–Ω—ã–π –õ–∞—Ç—Ç–µ', desc:'–°–æ–≥—Ä–µ–≤–∞—é—â–∏–π –ª–∞—Ç—Ç–µ —Å –∫–æ—Ä–∏—Ü–µ–π, –∏–º–±–∏—Ä—ë–º –∏ –º—É—Å–∫–∞—Ç–Ω—ã–º –æ—Ä–µ—Ö–æ–º', until:'28 —Ñ–µ–≤', badge:'–°–µ–∑–æ–Ω–Ω–æ–µ', gradient:'bg-gradient-to-br from-orange-500 to-amber-600', prices:{ old:32000, new:25000 }, conds:['–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Å–µ—Ä–∏—è','–¢–æ–ª—å–∫–æ –∑–∏–º–Ω–∏–π —Å–µ–∑–æ–Ω','–î–æ—Å—Ç—É–ø–µ–Ω –≤ 10 –∞–≤—Ç–æ–º–∞—Ç–∞—Ö'] },
];

const tiers = [
  { id:'bronze', name:'–ë—Ä–æ–Ω–∑–∞', emoji:'ü•â', discount:3, minPts:0, color:'#CD7F32' },
  { id:'silver', name:'–°–µ—Ä–µ–±—Ä–æ', emoji:'ü•à', discount:5, minPts:100000, color:'#C0C0C0' },
  { id:'gold', name:'–ó–æ–ª–æ—Ç–æ', emoji:'üëë', discount:7, minPts:200000, color:'#FFD700' },
  { id:'platinum', name:'–ü–ª–∞—Ç–∏–Ω–∞', emoji:'üíé', discount:10, minPts:500000, color:'#E5E4E2' },
];

const partners = [
  { id:'loc', icon:'üè¢', title:'–õ–æ–∫–∞—Ü–∏—è–º', desc:'–†–∞–∑–º–µ—Å—Ç–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –ø–æ–ª–Ω—ã–π —Å–µ—Ä–≤–∏—Å', accent:'#1E40AF', bg:'#EFF6FF', border:'#BFDBFE' },
  { id:'sup', icon:'üì¶', title:'–ü–æ—Å—Ç–∞–≤—â–∏–∫–∞–º', desc:'–ü–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –¥–ª—è —Ä–∞—Å—Ç—É—â–µ–π —Å–µ—Ç–∏', accent:'#92400E', bg:'#FFFBEB', border:'#FDE68A' },
  { id:'inv', icon:'üìà', title:'–ò–Ω–≤–µ—Å—Ç–æ—Ä–∞–º', desc:'–ò–Ω–≤–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ –∞–≤—Ç–æ–º–∞—Ç—ã, –ø–æ–ª—É—á–∞–π—Ç–µ –¥–æ—Ö–æ–¥', accent:'#166534', bg:'#F0FDF4', border:'#BBF7D0' },
  { id:'fran', icon:'üöÄ', title:'–§—Ä–∞–Ω—à–∏–∑–∞', desc:'–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–≤–æ–π –≤–µ–Ω–¥–∏–Ω–≥-–±–∏–∑–Ω–µ—Å', accent:'#7C3AED', bg:'#F5F3FF', border:'#DDD6FE' },
];

const fmt = n => new Intl.NumberFormat('ru-RU').format(n);
const fmtS = n => fmt(n) + ' —Å—É–º';

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// MAIN APP
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function App() {
  const [sec, setSec] = useState('home');
  const [mob, setMob] = useState(false);
  const [cart, setCart] = useState([]);
  const [showCart, setShowCart] = useState(false);
  const [selMachine, setSelMachine] = useState(null);
  const [selProduct, setSelProduct] = useState(null);
  const [openPartner, setOpenPartner] = useState(null);
  const [formSent, setFormSent] = useState(null);
  const [mapF, setMapF] = useState('all');
  const [menuCat, setMenuCat] = useState('all');
  const [menuTemp, setMenuTemp] = useState('all');
  const [promoF, setPromoF] = useState('all');
  const [scrolled, setScrolled] = useState(false);
  const [favs, setFavs] = useState(new Set());
  const [mapSearch, setMapSearch] = useState('');
  const [expandedPromo, setExpandedPromo] = useState(null);
  const [mapTab, setMapTab] = useState('map'); // 'map' | 'types'
  const [expandedType, setExpandedType] = useState(null);
  const toggleFav = id => setFavs(prev => { const n = new Set(prev); n.has(id) ? n.delete(id) : n.add(id); return n; });

  useEffect(() => {
    const fn = () => setScrolled(window.scrollY > 20);
    window.addEventListener('scroll', fn);
    return () => window.removeEventListener('scroll', fn);
  }, []);

  const go = s => { setSec(s); setMob(false); window.scrollTo({top:0, behavior:'smooth'}); };
  const addToCart = p => {
    setCart(prev => {
      const e = prev.find(i => i.id === p.id);
      if (e) return prev.map(i => i.id === p.id ? {...i, qty:i.qty+1} : i);
      return [...prev, {...p, qty:1}];
    });
  };
  const rmFromCart = id => {
    setCart(prev => {
      const it = prev.find(i => i.id === id);
      if (it && it.qty > 1) return prev.map(i => i.id === id ? {...i, qty:i.qty-1} : i);
      return prev.filter(i => i.id !== id);
    });
  };
  const cartTotal = cart.reduce((s,i) => s + i.price*i.qty, 0);
  const cartCount = cart.reduce((s,i) => s + i.qty, 0);

  const navItems = [
    {id:'home', label:'–ì–ª–∞–≤–Ω–∞—è'}, {id:'map', label:'–ê–≤—Ç–æ–º–∞—Ç—ã'}, {id:'menu', label:'–ú–µ–Ω—é'},
    {id:'loyalty', label:'–ë–æ–Ω—É—Å—ã'}, {id:'promo', label:'–ê–∫—Ü–∏–∏'}, {id:'partner', label:'–ü–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ'}, {id:'about', label:'–û –Ω–∞—Å'},
  ];

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // HEADER
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  const Header = () => (
    <header className={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${scrolled ? 'bg-espresso-dark/95 backdrop-blur-lg shadow-xl' : 'bg-espresso-dark'}`}>
      <div className="max-w-6xl mx-auto px-4 sm:px-6">
        <div className="flex items-center justify-between h-16">
          <button onClick={() => go('home')} className="flex items-center gap-2.5">
            <img src="images/opt/vendhub-logo.png" alt="VendHub" className="w-10 h-10 rounded-xl shadow-lg shadow-caramel/30"/>
            <div>
              <div className="font-display text-lg text-white tracking-tight">VendHub</div>
              <div className="text-[9px] tracking-[1.5px] uppercase text-caramel-light">Coffee & Snacks</div>
            </div>
          </button>
          <nav className="hidden lg:flex items-center gap-1">
            {navItems.map(n => (
              <button key={n.id} onClick={() => go(n.id)}
                className={`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${sec===n.id ? 'bg-white/10 text-caramel' : 'text-white/60 hover:text-white hover:bg-white/5'}`}>
                {n.label}
              </button>
            ))}
          </nav>
          <div className="flex items-center gap-2">
            {cartCount > 0 && (
              <button onClick={() => setShowCart(true)} className="relative p-2.5 text-white hover:bg-white/10 rounded-xl transition-colors">
                <Ic.bag s={21} />
                <span className="absolute -top-0.5 -right-0.5 w-5 h-5 bg-caramel text-[10px] font-bold rounded-full flex items-center justify-center text-espresso-dark">{cartCount}</span>
              </button>
            )}
            <button onClick={() => setMob(!mob)} className="lg:hidden p-2 text-white hover:bg-white/10 rounded-xl">
              {mob ? <Ic.x s={22}/> : <Ic.menu s={22}/>}
            </button>
          </div>
        </div>
      </div>
      {mob && (
        <div className="lg:hidden bg-espresso-dark border-t border-white/10 anim-fi">
          <div className="px-4 py-3 space-y-1">
            {navItems.map(n => (
              <button key={n.id} onClick={() => go(n.id)}
                className={`w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium ${sec===n.id ? 'bg-white/10 text-caramel' : 'text-white/60 hover:bg-white/5'}`}>
                {n.label}
              </button>
            ))}
          </div>
        </div>
      )}
    </header>
  );

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // HOME
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  const getGreeting = () => { const h = new Date().getHours(); if(h<12) return '–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ'; if(h<18) return '–î–æ–±—Ä—ã–π –¥–µ–Ω—å'; return '–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä'; };
  const Home = () => (
    <div>
      <div className="bg-gradient-to-br from-espresso-dark via-espresso to-espresso-light pt-24 pb-16 sm:pb-20 px-4 relative overflow-hidden">
        <div className="absolute inset-0 opacity-[.03]" style={{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23fff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/svg%3E")`}} />
        <div className="absolute -top-20 -right-20 w-64 h-64 bg-caramel/10 rounded-full blur-3xl" />
        <div className="absolute -bottom-16 -left-16 w-48 h-48 bg-caramel/5 rounded-full blur-2xl" />
        <div className="max-w-6xl mx-auto relative">
          <div className="max-w-2xl">
            <div className="anim-fu text-caramel text-sm font-semibold tracking-wide mb-3 flex items-center gap-2">
              <span className="text-lg">{new Date().getHours()<12 ? '‚òÄÔ∏è' : new Date().getHours()<18 ? 'üå§Ô∏è' : 'üåô'}</span>
              {getGreeting()}
            </div>
            <h1 className="anim-fu d1 font-display text-4xl sm:text-5xl lg:text-6xl text-white leading-[1.1] mb-4">
              –ö–æ—Ñ–µ –∏–∑ –∞–≤—Ç–æ–º–∞—Ç–æ–≤<br/>–≤ –ø–∞—Ä—É –∫–ª–∏–∫–æ–≤
            </h1>
            <p className="anim-fu d2 text-white/50 text-base sm:text-lg max-w-lg mb-8 leading-relaxed">
              –ë–æ–ª–µ–µ {products.length} –≤–∏–¥–æ–≤ –Ω–∞–ø–∏—Ç–∫–æ–≤. {machines.filter(m=>m.status==='online').length}+ –∞–≤—Ç–æ–º–∞—Ç–æ–≤ –≤ –±–æ–ª—å–Ω–∏—Ü–∞—Ö, –±–∏–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä–∞—Ö –∏ –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –¢–∞—à–∫–µ–Ω—Ç–∞.
            </p>
            <div className="anim-fu d3 flex flex-wrap gap-3">
              <button onClick={() => go('map')} className="btn-caramel px-6 py-3 text-sm flex items-center gap-2">
                <Ic.mapPin s={18}/> –ù–∞–π—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç
              </button>
              <button onClick={() => go('menu')} className="btn-espresso px-6 py-3 text-sm flex items-center gap-2 border border-white/20">
                <Ic.coffee s={18}/> –°–º–æ—Ç—Ä–µ—Ç—å –º–µ–Ω—é
              </button>
            </div>
          </div>
          {/* Vending machine image ‚Äî desktop only */}
          <div className="hidden lg:block absolute right-8 bottom-0 anim-fu d4">
            <img src="images/opt/vending-machine.jpg" alt="–ê–≤—Ç–æ–º–∞—Ç" className="h-72 object-contain drop-shadow-2xl opacity-90"/>
          </div>
        </div>
      </div>

      <div className="max-w-6xl mx-auto px-4 sm:px-6">
        {/* Stats */}
        <div className="grid grid-cols-2 sm:grid-cols-4 gap-3 -mt-8 mb-10">
          {[
            {n:'15+', sub:'–∞–≤—Ç–æ–º–∞—Ç–æ–≤', e:'‚òï', bg:'bg-espresso-50'},
            {n:'35+', sub:'–Ω–∞–ø–∏—Ç–∫–æ–≤', e:'ü•§', bg:'bg-caramel-light/30'},
            {n:'10K+', sub:'–∑–∞–∫–∞–∑–æ–≤', e:'üìä', bg:'bg-mint-light'},
            {n:'4.8', sub:'—Ä–µ–π—Ç–∏–Ω–≥', e:'‚≠ê', bg:'bg-amber-50'},
          ].map((s,i) => (
            <div key={i} className={`anim-fu d${i+1} hover-lift coffee-card text-center`}>
              <div className={`w-10 h-10 ${s.bg} rounded-xl flex items-center justify-center text-xl mx-auto mb-2`}>{s.e}</div>
              <div className="font-display text-2xl text-espresso-dark">{s.n}</div>
              <div className="text-xs text-espresso/60 mt-0.5">{s.sub}</div>
            </div>
          ))}
        </div>

        {/* Quick Actions */}
        <div className="grid grid-cols-2 gap-3 mb-8">
          <button onClick={() => go('menu')} className="anim-fu d1 hover-lift coffee-card !p-5 border-2 border-espresso/10 hover:border-espresso/25 flex flex-col items-center text-center gap-2">
            <div className="w-14 h-14 rounded-2xl bg-espresso flex items-center justify-center shadow-lg shadow-espresso/30">
              <Ic.coffee s={28} c="text-cream" />
            </div>
            <div>
              <div className="font-display font-bold text-espresso-dark">–ö–∞—Ç–∞–ª–æ–≥</div>
              <div className="text-xs text-espresso/50">–í—Å–µ –Ω–∞–ø–∏—Ç–∫–∏</div>
            </div>
          </button>
          <button onClick={() => go('map')} className="anim-fu d2 hover-lift coffee-card !p-5 border-2 border-caramel/20 hover:border-caramel/40 flex flex-col items-center text-center gap-2">
            <div className="w-14 h-14 rounded-2xl bg-caramel flex items-center justify-center shadow-lg shadow-caramel/30">
              <Ic.mapPin s={28} c="text-white" />
            </div>
            <div>
              <div className="font-display font-bold text-espresso-dark">–ê–≤—Ç–æ–º–∞—Ç—ã</div>
              <div className="text-xs text-espresso/50">–ù–∞–π—Ç–∏ —Ä—è–¥–æ–º</div>
            </div>
          </button>
        </div>

        {/* Promo banner */}
        <div className="anim-fu d3 bg-gradient-to-r from-caramel to-caramel-dark rounded-2xl p-5 mb-8 relative overflow-hidden">
          <img src="images/opt/hero-coffee.jpg" alt="" className="absolute inset-0 w-full h-full object-cover opacity-20 mix-blend-overlay" loading="lazy"/>
          <div className="absolute -right-6 -bottom-6 w-24 h-24 bg-white/10 rounded-full blur-xl" />
          <div className="relative flex items-center justify-between">
            <div>
              <span className="inline-block px-2 py-0.5 bg-white/20 rounded-full text-xs text-white font-medium mb-1.5">–ê–∫—Ü–∏—è</span>
              <h3 className="font-display text-lg font-bold text-white">–í—Ç–æ—Ä–æ–π –∫–æ—Ñ–µ -50%</h3>
              <p className="text-white/70 text-sm">–ü—Ä–∏ –∑–∞–∫–∞–∑–µ –æ—Ç 30 000 UZS</p>
            </div>
            <button onClick={() => go('promo')} className="px-4 py-2 bg-white text-espresso rounded-xl font-semibold text-sm hover:bg-white/90">
              –ü–æ–¥—Ä–æ–±–Ω–µ–µ
            </button>
          </div>
        </div>

        {/* Popular */}
        <div className="flex items-center justify-between mb-4">
          <h2 className="font-display text-xl text-espresso-dark">–ü–æ–ø—É–ª—è—Ä–Ω–æ–µ</h2>
          <button onClick={() => go('menu')} className="text-sm text-caramel font-semibold hover:text-caramel-dark">–í—Å—ë –º–µ–Ω—é ‚Üí</button>
        </div>
        <div className="grid grid-cols-2 sm:grid-cols-4 gap-3 mb-10">
          {products.filter(p => p.popular).slice(0,4).map((p,i) => (
            <div key={p.id} className={`anim-fu d${i+1} hover-lift coffee-card !p-0 overflow-hidden cursor-pointer`} onClick={() => setSelProduct(p)}>
              <div className="aspect-square bg-gradient-to-br from-foam to-caramel-light/20 flex items-center justify-center text-5xl relative overflow-hidden">
                {p.img ? <img src={p.img} alt={p.name} className="w-full h-full object-cover" loading="lazy"/> : p.emoji}
                {p.oldPrice && <span className="absolute top-2 left-2 px-2 py-0.5 bg-red-500 text-white text-[10px] font-bold rounded-lg shadow">-{Math.round((1-p.price/p.oldPrice)*100)}%</span>}
                {p.isNew && <span className="absolute top-2 right-2 px-2 py-0.5 bg-emerald-500 text-white text-[10px] font-bold rounded-lg shadow">NEW</span>}
              </div>
              <div className="p-3">
                <p className="font-semibold text-sm text-espresso-dark truncate">{p.name}</p>
                <div className="flex items-center justify-between mt-1">
                  <span className="price-tag text-sm">{fmt(p.price)} UZS</span>
                  <div className="flex items-center gap-0.5"><StarFill s={12}/> <span className="text-xs text-espresso/60">{p.rating}</span></div>
                </div>
              </div>
            </div>
          ))}
        </div>

        {/* Features */}
        <h2 className="font-display text-xl text-espresso-dark mb-4">–ü–æ—á–µ–º—É VendHub?</h2>
        <div className="grid sm:grid-cols-2 lg:grid-cols-4 gap-3 mb-10">
          {[
            {icon:Ic.coffee, title:'35+ –Ω–∞–ø–∏—Ç–∫–æ–≤', desc:'–≠—Å–ø—Ä–µ—Å—Å–æ, –ª–∞—Ç—Ç–µ, –∫–∞–ø—É—á–∏–Ω–æ, –º–∞—Ç—á–∞ –∏ —Ö–æ–ª–æ–¥–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏', color:'text-amber-600', bg:'bg-amber-100'},
            {icon:Ic.mapPin, title:'15+ –∞–≤—Ç–æ–º–∞—Ç–æ–≤', desc:'–ë–æ–ª—å–Ω–∏—Ü—ã, –±–∏–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä—ã, —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç—ã', color:'text-blue-600', bg:'bg-blue-100'},
            {icon:Ic.gift, title:'–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏', desc:'–ë–∞–ª–ª—ã, —Å–∫–∏–¥–∫–∏ –¥–æ 10% –∏ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –±–æ–Ω—É—Å—ã', color:'text-purple-600', bg:'bg-purple-100'},
            {icon:Ic.zap, title:'–ë—ã—Å—Ç—Ä—ã–π –∑–∞–∫–∞–∑', desc:'–ó–∞–∫–∞–∂–∏—Ç–µ –∑–∞—Ä–∞–Ω–µ–µ —á–µ—Ä–µ–∑ Telegram Mini App', color:'text-yellow-600', bg:'bg-yellow-100'},
          ].map((f,i) => (
            <div key={i} className={`anim-fu d${i+1} hover-lift coffee-card`}>
              <div className={`w-11 h-11 rounded-xl ${f.bg} flex items-center justify-center mb-3`}>
                <f.icon s={22} c={f.color} />
              </div>
              <h3 className="font-semibold text-espresso-dark text-sm mb-1">{f.title}</h3>
              <p className="text-xs text-espresso/60 leading-relaxed">{f.desc}</p>
            </div>
          ))}
        </div>
      </div>
    </div>
  );

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // MAP
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  const Map = () => {
    const getType = m => machineTypes.find(t => t.id === m.typeId) || machineTypes[0];
    const filtered = machines.filter(m =>
      (mapF==='all' || (mapF==='online' && m.status==='online') || (mapF==='promo' && m.promo) || machineTypes.some(t => t.id===mapF && m.typeId===t.id)) &&
      (!mapSearch || m.name.toLowerCase().includes(mapSearch.toLowerCase()) || m.addr.toLowerCase().includes(mapSearch.toLowerCase()))
    );
    return (
      <div className="pt-20 pb-12"><div className="max-w-6xl mx-auto px-4 sm:px-6">
        <h1 className="font-display text-2xl text-espresso-dark mb-1 anim-fu">–ù–∞—à–∏ –∞–≤—Ç–æ–º–∞—Ç—ã</h1>
        <p className="text-espresso/50 text-sm mb-3 anim-fu d1">{machines.filter(m=>m.status==='online').length} –∏–∑ {machines.length} –∞–≤—Ç–æ–º–∞—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç</p>

        {/* Map / Types tab toggle */}
        <div className="flex gap-2 mb-4 anim-fu d1">
          <button onClick={() => setMapTab('map')}
            className={`flex items-center gap-1.5 px-4 py-2 rounded-xl text-sm font-semibold transition-all ${
              mapTab==='map' ? 'bg-espresso-dark text-cream shadow-lg shadow-espresso/20' : 'bg-foam text-espresso hover:bg-espresso-50'
            }`}>
            <Ic.mapPin s={16}/> –ö–∞—Ä—Ç–∞
          </button>
          <button onClick={() => setMapTab('types')}
            className={`flex items-center gap-1.5 px-4 py-2 rounded-xl text-sm font-semibold transition-all ${
              mapTab==='types' ? 'bg-espresso-dark text-cream shadow-lg shadow-espresso/20' : 'bg-foam text-espresso hover:bg-espresso-50'
            }`}>
            <Ic.coffee s={16}/> –¢–∏–ø—ã –∞–≤—Ç–æ–º–∞—Ç–æ–≤
          </button>
        </div>

        {mapTab === 'types' ? (
          /* ‚ïê‚ïê‚ïê VENDING TYPES SECTION ‚ïê‚ïê‚ïê */
          <div className="anim-fi">
            <p className="text-sm text-espresso/50 mb-4">–£–∑–Ω–∞–π—Ç–µ –æ —Ç–∏–ø–∞—Ö –Ω–∞—à–∏—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤, –∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö</p>
            <div className="space-y-4">
              {machineTypes.map(mt => {
                const isOpen = expandedType === mt.id;
                const typeMachines = machines.filter(m => m.typeId === mt.id);
                return (
                  <div key={mt.id} className="coffee-card !p-0 overflow-hidden">
                    {/* Type Header ‚Äî clickable accordion */}
                    <button onClick={() => setExpandedType(isOpen ? null : mt.id)}
                      className="w-full p-4 flex items-start gap-4 text-left hover:bg-foam/50 transition-colors">
                      <div className="w-16 h-16 sm:w-20 sm:h-20 rounded-xl overflow-hidden bg-foam flex-shrink-0">
                        {mt.img ? <img src={mt.img} alt={mt.name} className="w-full h-full object-cover"/> : <div className="w-full h-full flex items-center justify-center text-3xl">{mt.emoji}</div>}
                      </div>
                      <div className="flex-1 min-w-0">
                        <div className="flex items-center gap-2 mb-1">
                          <h3 className="font-display text-lg text-espresso-dark">{mt.emoji} {mt.name}</h3>
                          <span className="px-2 py-0.5 bg-espresso/[.06] rounded-full text-[10px] text-espresso/60 font-semibold">{typeMachines.length} —à—Ç.</span>
                        </div>
                        <p className="text-sm text-espresso/50 leading-relaxed">{mt.desc}</p>
                      </div>
                      <Ic.chevD s={20} c={`text-espresso/40 flex-shrink-0 mt-2 transition-transform ${isOpen ? 'rotate-180' : ''}`}/>
                    </button>

                    {/* Expanded content */}
                    {isOpen && (
                      <div className="border-t border-espresso/[.06] anim-fi">
                        {/* Specs Grid */}
                        <div className="p-4">
                          <h4 className="text-xs font-semibold text-espresso/40 uppercase tracking-wider mb-3">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏</h4>
                          <div className="grid grid-cols-2 gap-2">
                            {mt.specs.map((s,i) => (
                              <div key={i} className="p-3 bg-foam rounded-xl">
                                <p className="text-[10px] text-espresso/40 font-medium mb-0.5">{s.label}</p>
                                <p className="text-xs text-espresso-dark font-semibold leading-snug">{s.value}</p>
                              </div>
                            ))}
                          </div>
                        </div>

                        {/* Machines of this type */}
                        {typeMachines.length > 0 && (
                          <div className="p-4 pt-0">
                            <h4 className="text-xs font-semibold text-espresso/40 uppercase tracking-wider mb-3">–ê–≤—Ç–æ–º–∞—Ç—ã —ç—Ç–æ–≥–æ —Ç–∏–ø–∞</h4>
                            <div className="space-y-2">
                              {typeMachines.map(tm => (
                                <button key={tm.id} onClick={() => setSelMachine(tm)}
                                  className="w-full flex items-center gap-3 p-3 bg-foam rounded-xl hover:bg-espresso-50/80 transition-colors text-left">
                                  <div className={`w-2 h-2 rounded-full flex-shrink-0 ${tm.status==='online' ? 'bg-mint' : 'bg-espresso/30'}`}/>
                                  <div className="flex-1 min-w-0">
                                    <p className="text-sm font-semibold text-espresso-dark truncate">{tm.name}</p>
                                    <p className="text-[11px] text-espresso/50 truncate">{tm.addr}</p>
                                  </div>
                                  <div className="flex items-center gap-1 text-xs text-espresso/40"><StarFill s={10}/> {tm.rating}</div>
                                  <Ic.chevR s={14} c="text-espresso/30"/>
                                </button>
                              ))}
                            </div>
                          </div>
                        )}
                      </div>
                    )}
                  </div>
                );
              })}
            </div>
          </div>
        ) : (
        <div className="anim-fi">

        <div className="relative mb-4">
          <Ic.search s={18} c="absolute left-3.5 top-1/2 -translate-y-1/2 text-espresso/30"/>
          <input value={mapSearch} onChange={e => setMapSearch(e.target.value)} placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –∞–¥—Ä–µ—Å—É..."
            className="w-full pl-10 pr-4 py-3 bg-white border border-espresso/10 rounded-xl text-sm focus:outline-none focus:border-caramel focus:ring-2 focus:ring-caramel/20 transition-all"/>
          {mapSearch && <button onClick={() => setMapSearch('')} className="absolute right-3 top-1/2 -translate-y-1/2"><Ic.x s={16} c="text-espresso/30"/></button>}
        </div>
        <div className="anim-fu d2 relative w-full h-56 sm:h-72 lg:h-80 bg-gradient-to-br from-foam to-caramel-light/20 rounded-2xl overflow-hidden mb-5 border border-espresso/10">
          <svg className="absolute inset-0 w-full h-full opacity-[.07]" viewBox="0 0 500 300" preserveAspectRatio="none">
            {Array.from({length:8}).map((_,i) => <line key={`v${i}`} x1={(i+1)*55} y1="0" x2={(i+1)*55} y2="300" stroke="#5D4037" strokeWidth=".5"/>)}
            {Array.from({length:5}).map((_,i) => <line key={`h${i}`} x1="0" y1={(i+1)*48} x2="500" y2={(i+1)*48} stroke="#5D4037" strokeWidth=".5"/>)}
            <path d="M 0 120 Q 150 105, 250 135 T 500 114" stroke="#5D4037" strokeWidth="1.5" fill="none"/>
          </svg>
          <div className="absolute top-3 left-4 text-[9px] font-bold text-espresso/30 uppercase tracking-[3px]">Tashkent</div>
          {filtered.map(m => {
            const mt = getType(m);
            return (
              <button key={m.id} onClick={() => setSelMachine(m)} className="absolute transform -translate-x-1/2 -translate-y-1/2 group" style={{left:`${m.x}%`, top:`${m.y}%`}}>
                <div className={`w-10 h-10 sm:w-11 sm:h-11 rounded-full flex items-center justify-center shadow-lg transition-transform group-hover:scale-110 ${m.status==='online' ? 'bg-espresso' : 'bg-espresso/40'}`}>
                  <span className="text-base sm:text-lg">{mt.emoji}</span>
                </div>
                {m.promo && <span className="absolute -top-1 -right-1 w-4 h-4 bg-caramel rounded-full flex items-center justify-center text-white text-[8px] font-bold">%</span>}
                <div className="absolute top-full left-1/2 -translate-x-1/2 mt-1 whitespace-nowrap bg-white px-2 py-1 rounded text-[10px] font-medium shadow opacity-0 group-hover:opacity-100 transition-opacity text-espresso-dark">{mt.emoji} {m.name}</div>
              </button>
            );
          })}
        </div>
        {/* Status & Type Filters */}
        <div className="flex gap-2 mb-3 overflow-x-auto scrollbar-hide">
          {[{id:'all',l:'–í—Å–µ',c:machines.length},{id:'online',l:'–†–∞–±–æ—Ç–∞—é—Ç',c:machines.filter(m=>m.status==='online').length},{id:'promo',l:'–° –∞–∫—Ü–∏–µ–π',c:machines.filter(m=>m.promo).length}].map(f => (
            <button key={f.id} onClick={() => setMapF(f.id)} className={`pill flex items-center gap-1.5 ${mapF===f.id ? 'active' : ''}`}>{f.l} <span className={`text-[10px] px-1.5 py-0.5 rounded-full ${mapF===f.id ? 'bg-white/20' : 'bg-espresso/10'}`}>{f.c}</span></button>
          ))}
        </div>
        <div className="flex gap-2 mb-5 overflow-x-auto scrollbar-hide">
          {machineTypes.map(t => {
            const cnt = machines.filter(m => m.typeId===t.id).length;
            return (
              <button key={t.id} onClick={() => setMapF(mapF===t.id ? 'all' : t.id)}
                className={`flex items-center gap-1.5 px-3.5 py-2 rounded-full text-sm font-medium border transition-all ${
                  mapF===t.id ? 'bg-espresso-dark text-cream border-espresso-dark shadow' : 'bg-white text-espresso border-espresso/15 hover:border-espresso/30'
                }`}>
                <span>{t.emoji}</span> {t.name}
                <span className={`text-[10px] px-1.5 py-0.5 rounded-full ${mapF===t.id ? 'bg-white/20' : 'bg-espresso/10'}`}>{cnt}</span>
              </button>
            );
          })}
        </div>
        <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-3">
          {filtered.map(m => {
            const mt = getType(m);
            const mProds = m.productIds ? m.productIds.length : 0;
            return (
              <button key={m.id} onClick={() => setSelMachine(m)} className="hover-lift coffee-card text-left w-full">
                <div className="flex items-start gap-3">
                  <div className={`w-11 h-11 rounded-xl flex items-center justify-center text-lg flex-shrink-0 overflow-hidden ${m.status==='online' ? 'bg-espresso-50' : 'bg-gray-100'}`}>
                    {mt.img ? <img src={mt.img} alt="" className="w-full h-full object-cover"/> : mt.emoji}
                  </div>
                  <div className="flex-1 min-w-0">
                    <div className="flex items-center gap-2 mb-0.5">
                      <span className="font-semibold text-espresso-dark text-sm truncate">{m.name}</span>
                      {m.promo && <span className="px-1.5 py-0.5 bg-caramel/15 text-caramel-dark text-[10px] rounded-full font-semibold flex-shrink-0">–ê–∫—Ü–∏—è</span>}
                    </div>
                    <p className="text-xs text-espresso/50 truncate">{m.addr}, {m.floor}</p>
                    <div className="flex items-center gap-3 mt-1.5 text-xs">
                      <span className="flex items-center gap-0.5 text-caramel-dark"><StarFill s={11}/> {m.rating}</span>
                      <span className="text-espresso/40">{m.dist} –∫–º</span>
                      <span className="text-espresso/40">{mProds} –ø–æ–∑.</span>
                      <span className={`flex items-center gap-1 ${m.status==='online' ? 'text-mint' : 'text-espresso/40'}`}>
                        <span className={`w-1.5 h-1.5 rounded-full ${m.status==='online' ? 'bg-mint' : 'bg-espresso/30'}`}/>{m.status==='online' ? '–†–∞–±–æ—Ç–∞–µ—Ç' : '–û—Ñ–ª–∞–π–Ω'}
                      </span>
                    </div>
                    <div className="flex items-center gap-1 mt-1">
                      <span className="text-[10px] px-1.5 py-0.5 bg-espresso/[.06] rounded text-espresso/50">{mt.emoji} {mt.name}</span>
                      {m.is24h && <span className="text-[10px] px-1.5 py-0.5 bg-espresso/[.06] rounded text-espresso/50">24/7</span>}
                    </div>
                  </div>
                </div>
              </button>
            );
          })}
        </div>
        </div>
        )}
      </div></div>
    );
  };

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // MENU
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  const Menu = () => {
    const cats = [{id:'all',l:'–í—Å–µ',e:'üçΩÔ∏è'},{id:'favs',l:'–ò–∑–±—Ä–∞–Ω–Ω–æ–µ',e:'‚ù§Ô∏è'},{id:'coffee',l:'–ö–æ—Ñ–µ',e:'‚òï'},{id:'tea',l:'–ß–∞–π',e:'üçµ'},{id:'other',l:'–î—Ä—É–≥–æ–µ',e:'üç´'},{id:'snack',l:'–°–Ω—ç–∫–∏',e:'ü•ê'}];
    const temps = [{id:'all',l:'–í—Å–µ',icon:null,color:''},{id:'hot',l:'–ì–æ—Ä—è—á–∏–µ',icon:Ic.flame,color:'text-red-500'},{id:'cold',l:'–•–æ–ª–æ–¥–Ω—ã–µ',icon:Ic.snowflake,color:'text-blue-500'}];
    const filtered = products.filter(p => (menuCat==='all' ? true : menuCat==='favs' ? favs.has(p.id) : p.cat===menuCat) && (menuTemp==='all'||(menuTemp==='hot'&&p.temp==='hot')||(menuTemp==='cold'&&p.temp==='cold')));
    const catCounts = cats.map(c => ({...c, count: c.id==='all' ? products.length : c.id==='favs' ? favs.size : products.filter(p => p.cat===c.id).length}));

    return (
      <div className="pt-20 pb-12"><div className="max-w-6xl mx-auto px-4 sm:px-6">
        <div className="flex items-end justify-between mb-4">
          <div>
            <h1 className="font-display text-2xl text-espresso-dark mb-1 anim-fu">–ù–∞—à–µ –º–µ–Ω—é</h1>
            <p className="text-espresso/50 text-sm anim-fu d1">{filtered.length} –∏–∑ {products.length} –ø–æ–∑–∏—Ü–∏–π</p>
          </div>
          <div className="flex items-center gap-1 anim-fu d2">
            <Ic.filter s={14} c="text-espresso/40"/>
            <span className="text-xs text-espresso/40">{menuCat!=='all' || menuTemp!=='all' ? '–§–∏–ª—å—Ç—Ä—ã –∞–∫—Ç–∏–≤–Ω—ã' : ''}</span>
          </div>
        </div>

        {/* Category Filter */}
        <div className="flex gap-2 mb-3 overflow-x-auto scrollbar-hide anim-fu d2">
          {catCounts.map(c => (
            <button key={c.id} onClick={() => setMenuCat(c.id)} className={`pill flex items-center gap-1.5 ${menuCat===c.id ? 'active' : ''}`}>
              <span>{c.e}</span> {c.l}
              <span className={`text-[10px] px-1.5 py-0.5 rounded-full ${menuCat===c.id ? 'bg-white/20' : 'bg-espresso/10'}`}>{c.count}</span>
            </button>
          ))}
        </div>

        {/* Temperature Filter */}
        <div className="flex gap-2 mb-5 overflow-x-auto scrollbar-hide anim-fu d3">
          {temps.map(t => (
            <button key={t.id} onClick={() => setMenuTemp(t.id)}
              className={`flex items-center gap-1.5 px-3.5 py-2 rounded-full text-sm font-medium border transition-all ${
                menuTemp===t.id
                  ? t.id==='hot' ? 'bg-gradient-to-r from-red-500 to-orange-500 text-white border-red-400 shadow-lg shadow-red-500/20'
                    : t.id==='cold' ? 'bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-blue-400 shadow-lg shadow-blue-500/20'
                    : 'bg-espresso-dark text-cream border-espresso-dark'
                  : 'bg-white text-espresso border-espresso/15 hover:border-espresso/30'
              }`}>
              {t.icon && <t.icon s={14} c={menuTemp===t.id ? 'text-white' : t.color}/>}
              {t.l}
            </button>
          ))}
        </div>

        {filtered.length === 0 && (
          <div className="text-center py-16 anim-fu">
            <div className="text-5xl mb-4">üîç</div>
            <p className="font-display text-lg text-espresso-dark mb-1">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>
            <p className="text-espresso/50 text-sm mb-4">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</p>
            <button onClick={() => { setMenuCat('all'); setMenuTemp('all'); }} className="btn-espresso px-5 py-2 text-sm">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
          </div>
        )}

        {/* Products Grid */}
        <div className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3">
          {filtered.map((p,i) => {
            const inCart = cart.find(c => c.id === p.id);
            const unavail = p.isAvailable === false;
            return (
              <div key={p.id} className={`anim-fu d${Math.min(i%6+1,6)} coffee-card !p-0 overflow-hidden ${unavail ? 'opacity-60 grayscale-[30%]' : ''}`}>
                <div className="aspect-square bg-gradient-to-br from-foam to-caramel-light/15 flex items-center justify-center text-5xl sm:text-6xl relative cursor-pointer overflow-hidden" onClick={() => !unavail && setSelProduct(p)}>
                  {p.img ? <img src={p.img} alt={p.name} className="w-full h-full object-cover" loading="lazy"/> : p.emoji}
                  {/* Top-left badges */}
                  {p.oldPrice && <span className="absolute top-2 left-2 px-2 py-0.5 bg-red-500 text-white text-[10px] font-bold rounded-lg shadow-sm">-{Math.round((1-p.price/p.oldPrice)*100)}%</span>}
                  {unavail && <span className="absolute top-2 left-2 px-2 py-0.5 bg-espresso/70 text-white text-[10px] font-bold rounded-lg">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</span>}
                  {/* Top-right: favorite + badges */}
                  <div className="absolute top-2 right-2 flex flex-col items-end gap-1">
                    <button onClick={e => { e.stopPropagation(); toggleFav(p.id); }}
                      className={`w-7 h-7 rounded-full flex items-center justify-center backdrop-blur-sm transition-all ${favs.has(p.id) ? 'bg-red-500 shadow-lg shadow-red-500/30' : 'bg-white/70 hover:bg-white'}`}>
                      <Ic.heart s={14} c={favs.has(p.id) ? 'text-white' : 'text-espresso/40'}/>
                    </button>
                    {p.isNew && <span className="px-2 py-0.5 bg-emerald-500 text-white text-[10px] font-bold rounded-lg shadow-sm">NEW</span>}
                    {p.isSeasonal && <span className="px-2 py-0.5 bg-orange-500 text-white text-[10px] font-bold rounded-lg shadow-sm">–°–µ–∑–æ–Ω</span>}
                  </div>
                  {/* Bottom-left: temp badge */}
                  {p.temp && (
                    <span className={`absolute bottom-2 left-2 px-2 py-0.5 rounded-full text-[10px] font-semibold flex items-center gap-1 backdrop-blur-sm ${
                      p.temp==='hot' ? 'bg-red-500/15 text-red-600 border border-red-200/50' : 'bg-blue-500/15 text-blue-600 border border-blue-200/50'
                    }`}>
                      {p.temp==='hot' ? 'üî• –ì–æ—Ä—è—á–∏–π' : 'üßä –•–æ–ª–æ–¥–Ω—ã–π'}
                    </span>
                  )}
                  {/* Bottom-right: rating */}
                  <span className="absolute bottom-2 right-2 flex items-center gap-0.5 px-1.5 py-0.5 bg-white/80 rounded-full backdrop-blur-sm">
                    <StarFill s={10}/> <span className="text-[10px] font-semibold text-espresso">{p.rating}</span>
                  </span>
                </div>
                <div className="p-3">
                  <p className="font-semibold text-sm text-espresso-dark truncate">{p.name}</p>
                  <p className="text-[11px] text-espresso/50 mt-0.5 truncate">{p.desc}</p>
                  <div className="flex items-center justify-between mt-2">
                    <div>
                      <span className="price-tag text-sm">{fmt(p.price)}</span>
                      {p.oldPrice && <span className="text-[10px] text-espresso/30 line-through ml-1">{fmt(p.oldPrice)}</span>}
                      <span className="text-[9px] text-espresso/30 ml-0.5">UZS</span>
                    </div>
                    {unavail ? (
                      <span className="text-[10px] text-espresso/30 font-medium">–°–∫–æ—Ä–æ</span>
                    ) : inCart ? (
                      <div className="flex items-center gap-1.5">
                        <button onClick={() => rmFromCart(p.id)} className="w-7 h-7 bg-foam rounded-lg flex items-center justify-center hover:bg-espresso-50"><Ic.minus s={14}/></button>
                        <span className="w-5 text-center text-sm font-semibold text-espresso-dark">{inCart.qty}</span>
                        <button onClick={() => addToCart(p)} className="w-7 h-7 bg-espresso rounded-lg flex items-center justify-center text-cream hover:bg-espresso-dark"><Ic.plus s={14}/></button>
                      </div>
                    ) : (
                      <button onClick={() => addToCart(p)} className="w-7 h-7 bg-espresso rounded-lg flex items-center justify-center text-cream hover:bg-espresso-dark hover:scale-105 transition-transform"><Ic.plus s={14}/></button>
                    )}
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </div></div>
    );
  };

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // LOYALTY / BONUSES
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  const Loyalty = () => (
    <div className="pt-20 pb-12"><div className="max-w-6xl mx-auto px-4 sm:px-6">
      <h1 className="font-display text-2xl text-espresso-dark mb-1 anim-fu">–ë–æ–Ω—É—Å—ã –∏ —É—Ä–æ–≤–Ω–∏</h1>
      <p className="text-espresso/50 text-sm mb-6 anim-fu d1">–ù–∞–∫–∞–ø–ª–∏–≤–∞–π—Ç–µ –±–∞–ª–ª—ã –∑–∞ –∫–∞–∂–¥—É—é –ø–æ–∫—É–ø–∫—É</p>

      {/* Balance Card */}
      <div className="anim-fu d2 coffee-card !p-0 overflow-hidden mb-6">
        <div className="bg-gradient-to-br from-espresso to-espresso-dark p-6 relative">
          <div className="absolute -top-8 -right-8 w-28 h-28 bg-white/5 rounded-full blur-2xl" />
          <div className="absolute -bottom-6 -left-6 w-20 h-20 bg-white/5 rounded-full blur-xl" />
          <div className="relative">
            <div className="flex items-center gap-2 mb-4 text-white/70"><Ic.gift s={18} c="text-caramel"/> <span className="text-sm font-medium">–ë–æ–Ω—É—Å–Ω—ã–π –±–∞–ª–∞–Ω—Å</span></div>
            <div className="text-center py-3">
              <p className="font-display text-5xl font-bold text-white">25 000</p>
              <p className="text-white/50 mt-1 text-sm">UZS</p>
            </div>
            <div className="flex items-center justify-center gap-2 text-sm text-white/70">
              <Ic.sparkle s={16} c="text-caramel"/> –£—Ä–æ–≤–µ–Ω—å: –°–µ—Ä–µ–±—Ä–æ <span className="text-white/30">¬∑</span> –°–∫–∏–¥–∫–∞ 5%
            </div>
          </div>
        </div>
      </div>

      {/* Progress */}
      <div className="anim-fu d3 coffee-card mb-6">
        <h3 className="font-semibold text-espresso-dark mb-3">–ü—Ä–æ–≥—Ä–µ—Å—Å —É—Ä–æ–≤–Ω—è</h3>
        <div className="flex justify-between mb-2">
          {tiers.map((t,i) => (
            <div key={t.id} className={`text-center ${i<=1 ? '' : 'opacity-40'}`}>
              <div className="w-9 h-9 rounded-full mx-auto mb-1 flex items-center justify-center text-sm" style={{background:t.color}}>
                <Ic.sparkle s={16} c="text-white"/>
              </div>
              <span className="text-[10px]">{t.name}</span>
            </div>
          ))}
        </div>
        <div className="h-3 bg-foam rounded-full overflow-hidden">
          <div className="h-full rounded-full" style={{width:'50%', background:`linear-gradient(90deg, #C0C0C0, #FFD700)`}} />
        </div>
        <p className="text-xs text-espresso/50 mt-2 text-center">–î–æ –ó–æ–ª–æ—Ç–∞: –µ—â—ë 50 000 UZS</p>
      </div>

      {/* Benefits */}
      <div className="anim-fu d4 coffee-card mb-6">
        <h3 className="font-semibold text-espresso-dark mb-3">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É—Ä–æ–≤–Ω–µ–π</h3>
        <div className="space-y-2">
          {tiers.map(t => (
            <div key={t.id} className={`flex items-center justify-between p-3 rounded-xl ${t.id==='silver' ? 'bg-espresso/[.06] border border-espresso/10' : 'bg-foam'}`}>
              <div className="flex items-center gap-3">
                <div className="w-8 h-8 rounded-full flex items-center justify-center text-sm" style={{background:t.color}}><Ic.sparkle s={14} c="text-white"/></div>
                <div><p className="font-medium text-espresso-dark text-sm">{t.name}</p><p className="text-[10px] text-espresso/40">–æ—Ç {fmt(t.minPts)} UZS</p></div>
              </div>
              <span className="font-bold text-espresso">{t.discount}%</span>
            </div>
          ))}
        </div>
      </div>

      {/* How it works */}
      <div className="grid sm:grid-cols-3 gap-3">
        {[
          {n:'01', t:'–ü–æ–∫—É–ø–∞–π—Ç–µ', d:'–ö–∞–∂–¥–∞—è –ø–æ–∫—É–ø–∫–∞ –ø—Ä–∏–Ω–æ—Å–∏—Ç –±–æ–Ω—É—Å–Ω—ã–µ –±–∞–ª–ª—ã', e:'‚òï'},
          {n:'02', t:'–ö–æ–ø–∏—Ç–µ', d:'–ß–µ–º –≤—ã—à–µ —É—Ä–æ–≤–µ–Ω—å ‚Äî —Ç–µ–º –±–æ–ª—å—à–µ —Å–∫–∏–¥–∫–∞', e:'‚≠ê'},
          {n:'03', t:'–ü–æ–ª—É—á–∞–π—Ç–µ', d:'–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∞–ª–ª—ã –¥–ª—è —Å–∫–∏–¥–æ–∫ –Ω–∞ –∑–∞–∫–∞–∑—ã', e:'üéÅ'},
        ].map((s,i) => (
          <div key={i} className="anim-fu coffee-card">
            <div className="flex items-center gap-3 mb-2">
              <div className="w-9 h-9 rounded-full bg-gradient-to-br from-espresso to-espresso-dark flex items-center justify-center text-caramel text-xs font-bold">{s.n}</div>
              <span className="text-xl">{s.e}</span>
            </div>
            <h4 className="font-semibold text-sm text-espresso-dark">{s.t}</h4>
            <p className="text-xs text-espresso/50 mt-1 leading-relaxed">{s.d}</p>
          </div>
        ))}
      </div>
    </div></div>
  );

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // PROMOS
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  const Promo = () => {
    const types = [{id:'all',l:'–í—Å–µ'},{id:'discount',l:'–°–∫–∏–¥–∫–∏'},{id:'combo',l:'–ö–æ–º–±–æ'},{id:'happy_hour',l:'Happy Hour'},{id:'bonus',l:'–ë–æ–Ω—É—Å—ã'},{id:'new',l:'–ù–æ–≤–∏–Ω–∫–∏'}];
    const filtered = promos.filter(p => promoF==='all' || p.type===promoF);
    return (
      <div className="pt-20 pb-12"><div className="max-w-6xl mx-auto px-4 sm:px-6">
        <h1 className="font-display text-2xl text-espresso-dark mb-1 anim-fu">–ê–∫—Ü–∏–∏ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</h1>
        <p className="text-espresso/50 text-sm mb-4 anim-fu d1">{promos.length} –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π</p>

        <div className="flex gap-2 mb-5 overflow-x-auto scrollbar-hide anim-fu d2">
          {types.map(t => <button key={t.id} onClick={() => setPromoF(t.id)} className={`pill whitespace-nowrap ${promoF===t.id ? 'active' : ''}`}>{t.l}</button>)}
        </div>

        <div className="grid sm:grid-cols-2 gap-4">
          {filtered.map((p,i) => (
            <div key={p.id} className={`anim-fu d${Math.min(i+1,6)} coffee-card !p-0 overflow-hidden`}>
              <div className={`${p.gradient} p-5 relative overflow-hidden`}>
                <div className="absolute -right-8 -top-8 w-28 h-28 bg-white/10 rounded-full" />
                <div className="absolute -left-4 -bottom-4 w-20 h-20 bg-white/10 rounded-full" />
                <div className="relative flex items-start justify-between">
                  <div className="flex-1">
                    {p.badge && <span className="inline-block px-2 py-0.5 bg-white/20 text-white text-xs font-medium rounded-full mb-2">{p.badge}</span>}
                    <h3 className="font-display text-lg font-bold text-white leading-tight">{p.title}</h3>
                    {p.prices && (
                      <div className="mt-2 flex items-center gap-2">
                        <span className="text-2xl font-bold text-white">{fmt(p.prices.new)} —Å—É–º</span>
                        <span className="text-sm text-white/60 line-through">{fmt(p.prices.old)}</span>
                      </div>
                    )}
                  </div>
                  <div className="w-12 h-12 rounded-2xl bg-white/20 flex items-center justify-center flex-shrink-0">
                    <Ic.percent s={24} c="text-white" />
                  </div>
                </div>
              </div>
              <div className="p-4">
                <p className="text-sm text-espresso/60 mb-3">{p.desc}</p>
                <div className="flex items-center justify-between mb-2">
                  <div className="flex items-center gap-1.5 text-xs text-espresso/40">
                    <Ic.clock s={14}/> {p.until}
                  </div>
                  {p.code && (
                    <button onClick={() => {navigator.clipboard?.writeText(p.code); }} className="px-3 py-1 bg-espresso-50 text-espresso font-mono text-xs font-bold rounded-lg hover:bg-espresso/10 transition-colors cursor-pointer" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å">{p.code}</button>
                  )}
                </div>
                {p.conds && (
                  <div>
                    <button onClick={() => setExpandedPromo(expandedPromo===p.id ? null : p.id)} className="text-xs text-caramel font-semibold flex items-center gap-1 hover:text-caramel-dark">
                      {expandedPromo===p.id ? '–°–∫—Ä—ã—Ç—å —É—Å–ª–æ–≤–∏—è' : '–£—Å–ª–æ–≤–∏—è –∞–∫—Ü–∏–∏'} <Ic.chevD s={12} c={`transition-transform ${expandedPromo===p.id ? 'rotate-180' : ''}`}/>
                    </button>
                    {expandedPromo===p.id && (
                      <div className="mt-2 space-y-1.5 anim-fi">
                        {p.conds.map((c,j) => (
                          <div key={j} className="flex items-start gap-2 text-xs text-espresso/50">
                            <Ic.check s={12} c="text-mint flex-shrink-0 mt-0.5"/>
                            <span>{c}</span>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                )}
              </div>
            </div>
          ))}
        </div>
      </div></div>
    );
  };

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // PARTNERSHIP
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  const Partner = () => {
    const ref = useRef(null);
    useEffect(() => { if (openPartner && ref.current) setTimeout(() => ref.current.scrollIntoView({behavior:'smooth',block:'start'}), 100); }, [openPartner]);

    const Form = ({id}) => (
      <div className="bg-foam rounded-xl p-4 mt-4">
        <h4 className="font-bold text-sm text-espresso-dark mb-3">–û—Å—Ç–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É</h4>
        <div className="grid grid-cols-2 gap-2 mb-2">
          <div><label className="text-[10px] font-semibold text-espresso/60 block mb-1">–ò–º—è</label><input className="w-full px-3 py-2 border border-espresso/15 rounded-lg text-sm focus:outline-none focus:border-caramel bg-white" placeholder="–ö–∞–∫ –≤–∞—Å –∑–æ–≤—É—Ç"/></div>
          <div><label className="text-[10px] font-semibold text-espresso/60 block mb-1">–¢–µ–ª–µ—Ñ–æ–Ω</label><input className="w-full px-3 py-2 border border-espresso/15 rounded-lg text-sm focus:outline-none focus:border-caramel bg-white" placeholder="+998"/></div>
        </div>
        <div className="mb-2"><label className="text-[10px] font-semibold text-espresso/60 block mb-1">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label><textarea className="w-full px-3 py-2 border border-espresso/15 rounded-lg text-sm focus:outline-none focus:border-caramel bg-white resize-none h-16" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à –∏–Ω—Ç–µ—Ä–µ—Å..."/></div>
        <button onClick={() => {setFormSent(id); setTimeout(() => setFormSent(null), 3000);}} className="w-full py-3 btn-espresso text-sm">{formSent===id ? '‚úì –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!' : '–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É'}</button>
      </div>
    );

    return (
      <div className="pt-20 pb-12"><div className="max-w-6xl mx-auto px-4 sm:px-6">
        <h1 className="font-display text-2xl text-espresso-dark mb-1 anim-fu">–ü–∞—Ä—Ç–Ω—ë—Ä—Å—Ç–≤–æ</h1>
        <p className="text-espresso/50 text-sm mb-6 anim-fu d1">–ß–µ—Ç—ã—Ä–µ –º–æ–¥–µ–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–∞</p>
        <div className="grid grid-cols-2 lg:grid-cols-4 gap-3 mb-6">
          {partners.map((c,i) => (
            <button key={c.id} onClick={() => setOpenPartner(openPartner===c.id ? null : c.id)}
              className={`anim-fu d${i+1} hover-lift coffee-card text-left w-full ${openPartner===c.id ? 'ring-2' : ''}`}
              style={{ringColor: openPartner===c.id ? c.accent : undefined}}>
              <div className="w-11 h-11 rounded-xl flex items-center justify-center text-2xl mb-3" style={{background:c.bg}}>{c.icon}</div>
              <h3 className="font-bold text-espresso-dark text-sm mb-1">{c.title}</h3>
              <p className="text-[11px] text-espresso/50 leading-relaxed mb-2">{c.desc}</p>
              <span className="text-[11px] font-semibold" style={{color:c.accent}}>{openPartner===c.id ? '–°–≤–µ—Ä–Ω—É—Ç—å ‚Üë' : '–ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí'}</span>
            </button>
          ))}
        </div>
        <div ref={ref}>
          {openPartner && (
            <div className="anim-expand coffee-card mb-4">
              <h3 className="font-display text-lg text-espresso-dark mb-3">{partners.find(p=>p.id===openPartner)?.icon} {partners.find(p=>p.id===openPartner)?.title}</h3>
              <p className="text-sm text-espresso/60 leading-relaxed mb-4">{
                openPartner==='loc' ? '–ú—ã —Ä–∞–∑–º–µ—â–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç—ã –≤ –ø–æ—Å–µ—â–∞–µ–º—ã—Ö –∑–æ–Ω–∞—Ö ‚Äî —Ö–æ–ª–ª–∞—Ö, –∑–∞–ª–∞—Ö –æ–∂–∏–¥–∞–Ω–∏—è, —Ä–∞–±–æ—á–∏—Ö –∑–æ–Ω–∞—Ö. –ü–æ–ª–Ω—ã–π —Å–µ—Ä–≤–∏—Å. –ù—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ —Ä–æ–∑–µ—Ç–∫–∞ 220–í –∏ Wi-Fi. –í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –∫–æ–º–∏—Å—Å–∏—é —Å –∫–∞–∂–¥–æ–π –ø—Ä–æ–¥–∞–∂–∏.' :
                openPartner==='sup' ? '–°–µ—Ç—å —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è ‚Äî –æ–±—ä—ë–º—ã –∑–∞–∫—É–ø–æ–∫ —Ä–∞—Å—Ç—É—Ç. –ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã, –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ, —Ä–∞—Å—Ö–æ–¥–Ω–∏–∫–∏, —Å—Ç–∞–∫–∞–Ω—ã, –∫—Ä—ã—à–∫–∏, —á–∏—Å—Ç—è—â–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞.' :
                openPartner==='inv' ? '–ò–Ω–≤–µ—Å—Ç–∏—Ä—É–π—Ç–µ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã. –î–æ–ª—è –æ—Ç 20% –¥–æ 100%. –ú—ã –æ–±—Å–ª—É–∂–∏–≤–∞–µ–º ‚Äî –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –¥–æ—Ö–æ–¥ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –¥–æ–ª–µ.' :
                '–ì–æ—Ç–æ–≤—ã–π –∞–≤—Ç–æ–º–∞—Ç, —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–æ–≤, –æ–±—É—á–µ–Ω–∏–µ, –∫–∞–±–∏–Ω–µ—Ç —Å –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π, –ø–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –æ–ø—Ç–æ–≤—ã–º —Ü–µ–Ω–∞–º, —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞.'
              }</p>
              <Form id={openPartner} />
            </div>
          )}
        </div>
        <div className="flex flex-wrap gap-1.5 mt-4">
          <span className="text-xs text-espresso/40">–£–∂–µ —Ä–∞–±–æ—Ç–∞–µ–º:</span>
          {['–†–µ—Å–ø. –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∏–∏','American Hospital','KIUT','IT Park','Grand Medical'].map((c,i) => (
            <span key={i} className="text-[11px] px-2.5 py-1 bg-white rounded-lg border border-espresso/10 text-espresso/70 font-medium">{c}</span>
          ))}
        </div>
      </div></div>
    );
  };

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // ABOUT
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  const About = () => (
    <div className="pt-20 pb-12"><div className="max-w-6xl mx-auto px-4 sm:px-6">
      <h1 className="font-display text-2xl text-espresso-dark mb-1 anim-fu">–û –∫–æ–º–ø–∞–Ω–∏–∏</h1>
      <p className="text-espresso/50 text-sm mb-6 anim-fu d1">–ö–æ—Ñ–µ –∏–∑ –≤–µ–Ω–¥–∏–Ω–≥–æ–≤—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ –≤ –ø–∞—Ä—É –∫–ª–∏–∫–æ–≤</p>

      <div className="anim-fu d2 coffee-card mb-6">
        <div className="flex items-center gap-3 mb-4">
          <div className="w-12 h-12 rounded-xl bg-gradient-to-br from-caramel to-caramel-dark flex items-center justify-center shadow-lg"><Ic.coffee s={24} c="text-white"/></div>
          <div><div className="font-display text-xl text-espresso-dark">VendHub</div><div className="text-xs text-espresso/50">Coffee & Snacks ¬∑ –¢–∞—à–∫–µ–Ω—Ç</div></div>
        </div>
        <p className="text-sm text-espresso/70 leading-relaxed">
          VendHub ‚Äî –æ–ø–µ—Ä–∞—Ç–æ—Ä —Å–µ—Ç–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ—Ñ–µ–π–Ω—ã—Ö –∏ —Å–Ω—ç–∫-–∞–≤—Ç–æ–º–∞—Ç–æ–≤ –≤ –¢–∞—à–∫–µ–Ω—Ç–µ.
          –ê–≤—Ç–æ–º–∞—Ç—ã –≤ –±–æ–ª—å–Ω–∏—Ü–∞—Ö, –±–∏–∑–Ω–µ—Å-—Ü–µ–Ω—Ç—Ä–∞—Ö, —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–∞—Ö –∏ –∞—ç—Ä–æ–ø–æ—Ä—Ç—É.
          –ö—Ä—É–≥–ª–æ—Å—É—Ç–æ—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –≥–æ—Ä—è—á–∏–º –∏ —Ö–æ–ª–æ–¥–Ω—ã–º –Ω–∞–ø–∏—Ç–∫–∞–º.
        </p>
      </div>

      {/* Contacts */}
      <h2 className="font-display text-xl text-espresso-dark mb-3">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
      <div className="anim-fu d3 coffee-card mb-6">
        {[
          {e:'üìç', l:'–ê–¥—Ä–µ—Å', v:'–¢–∞—à–∫–µ–Ω—Ç, –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω'},
          {e:'üìû', l:'–¢–µ–ª–µ—Ñ–æ–Ω', v:'+998 71 200 39 99'},
          {e:'üìß', l:'Email', v:'info@vendhub.uz'},
          {e:'üí¨', l:'Telegram', v:'@vendhub_support'},
          {e:'‚è∞', l:'–ü–æ–¥–¥–µ—Ä–∂–∫–∞', v:'24/7'},
        ].map((c,i) => (
          <div key={i} className={`flex gap-3 items-center py-3 ${i<4 ? 'border-b border-espresso/[.06]' : ''}`}>
            <div className="w-9 h-9 rounded-lg bg-foam flex items-center justify-center text-base">{c.e}</div>
            <div><div className="text-[10px] text-espresso/40 uppercase tracking-wider">{c.l}</div><div className="text-sm font-semibold text-espresso-dark">{c.v}</div></div>
          </div>
        ))}
      </div>
    </div></div>
  );

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // PRODUCT DETAIL MODAL
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  const ProductModal = () => {
    const [selOpt, setSelOpt] = useState(null);
    if (!selProduct) return null;
    const p = selProduct;
    const hasOpts = p.options && p.options.length > 0;
    const hotOpts = hasOpts ? p.options.filter(o => o.temp==='hot') : [];
    const coldOpts = hasOpts ? p.options.filter(o => o.temp==='cold' || o.temp==='ice') : [];
    const finalPrice = p.price + (selOpt ? selOpt.mod : 0);

    return (
      <div className="fixed inset-0 bg-black/50 z-[60] flex items-end sm:items-center justify-center" onClick={() => setSelProduct(null)}>
        <div className="bg-cream w-full sm:max-w-md sm:rounded-2xl rounded-t-3xl max-h-[88vh] overflow-y-auto anim-su" onClick={e => e.stopPropagation()}>
          <div className="relative">
            <div className="w-full aspect-[4/3] bg-gradient-to-br from-foam to-caramel-light/20 flex items-center justify-center text-8xl overflow-hidden">
              {p.img ? <img src={p.img} alt={p.name} className="w-full h-full object-cover"/> : p.emoji}
            </div>
            <div className="absolute top-3 right-3 flex gap-2">
              <button onClick={() => toggleFav(p.id)} className={`w-9 h-9 rounded-full flex items-center justify-center shadow backdrop-blur transition-all ${favs.has(p.id) ? 'bg-red-500' : 'bg-white/80 hover:bg-white'}`}>
                <Ic.heart s={18} c={favs.has(p.id) ? 'text-white' : 'text-espresso/40'}/>
              </button>
              <button onClick={() => setSelProduct(null)} className="w-9 h-9 bg-white/80 rounded-full flex items-center justify-center shadow backdrop-blur hover:bg-white"><Ic.x s={18}/></button>
            </div>
            {p.oldPrice && <span className="absolute top-3 left-3 px-3 py-1 bg-red-500 text-white text-xs font-bold rounded-lg shadow">-{Math.round((1-p.price/p.oldPrice)*100)}%</span>}
          </div>
          <div className="p-5">
            <div className="flex items-start justify-between mb-1">
              <div>
                <h2 className="font-display text-2xl text-espresso-dark uppercase font-bold">{p.name}</h2>
                <p className="text-sm text-espresso/50">{p.desc}</p>
              </div>
              <div className="text-right flex-shrink-0 ml-3">
                <p className="text-caramel-dark font-semibold text-sm whitespace-nowrap">–æ—Ç {fmt(p.price)} UZS</p>
                <div className="flex items-center gap-1 justify-end mt-1"><StarFill s={12}/><span className="text-xs font-semibold text-espresso">{p.rating}</span></div>
              </div>
            </div>

            {/* Stats */}
            <div className="grid grid-cols-3 gap-2 mt-4 mb-4">
              <div className="text-center p-3 bg-foam rounded-xl">
                <Ic.coffee s={18} c="mx-auto mb-1 text-espresso"/>
                <p className="font-semibold text-sm text-espresso-dark">{p.vol}</p>
                <p className="text-[10px] text-espresso/40">–û–±—ä—ë–º</p>
              </div>
              <div className="text-center p-3 bg-foam rounded-xl">
                <Ic.flame s={18} c="mx-auto mb-1 text-orange-500"/>
                <p className="font-semibold text-sm text-espresso-dark">{p.cal}</p>
                <p className="text-[10px] text-espresso/40">–ö–∞–ª–æ—Ä–∏–π</p>
              </div>
              <div className="text-center p-3 bg-foam rounded-xl">
                <Ic.drop s={18} c="mx-auto mb-1 text-caramel"/>
                <p className="font-semibold text-sm text-espresso-dark">{p.caffeine} –º–≥</p>
                <p className="text-[10px] text-espresso/40">–ö–æ—Ñ–µ–∏–Ω</p>
              </div>
            </div>

            {/* Vendify-style Two-Column Options Menu */}
            {hasOpts && (
              <div className="mb-4">
                <div className={`grid gap-4 ${hotOpts.length > 0 && coldOpts.length > 0 ? 'grid-cols-2' : 'grid-cols-1'}`}>
                  {/* Hot column */}
                  {hotOpts.length > 0 && (
                    <div>
                      <div className="flex items-center gap-1.5 mb-2">
                        <span className="text-base">‚òï</span>
                        <span className="font-display font-semibold text-orange-600 text-sm">–ì–æ—Ä—è—á–∏–µ</span>
                      </div>
                      <div className="border-b-2 border-orange-400 mb-3"/>
                      <div className="space-y-2">
                        {hotOpts.map(o => (
                          <button key={o.id} onClick={() => setSelOpt(selOpt?.id===o.id ? null : o)}
                            className={`w-full flex items-center justify-between px-3 py-2.5 rounded-xl border transition-all text-left ${
                              selOpt?.id===o.id
                                ? 'bg-orange-50 border-orange-300 shadow-sm'
                                : 'bg-white border-espresso/10 hover:border-orange-200'
                            }`}>
                            <span className="text-[13px] text-espresso-dark font-medium leading-tight">{o.name}</span>
                            <span className="text-[13px] font-bold text-orange-600 whitespace-nowrap ml-2">{fmt(p.price + o.mod)} UZS</span>
                          </button>
                        ))}
                      </div>
                    </div>
                  )}
                  {/* Cold column */}
                  {coldOpts.length > 0 && (
                    <div>
                      <div className="flex items-center gap-1.5 mb-2">
                        <span className="text-base">üßä</span>
                        <span className="font-display font-semibold text-blue-600 text-sm">–•–æ–ª–æ–¥–Ω—ã–µ</span>
                      </div>
                      <div className="border-b-2 border-blue-400 mb-3"/>
                      <div className="space-y-2">
                        {coldOpts.map(o => (
                          <button key={o.id} onClick={() => setSelOpt(selOpt?.id===o.id ? null : o)}
                            className={`w-full flex items-center justify-between px-3 py-2.5 rounded-xl border transition-all text-left ${
                              selOpt?.id===o.id
                                ? 'bg-blue-50 border-blue-300 shadow-sm'
                                : 'bg-white border-espresso/10 hover:border-blue-200'
                            }`}>
                            <span className="text-[13px] text-espresso-dark font-medium leading-tight">{o.name}</span>
                            <span className="text-[13px] font-bold text-blue-600 whitespace-nowrap ml-2">{fmt(p.price + o.mod)} UZS</span>
                          </button>
                        ))}
                      </div>
                    </div>
                  )}
                </div>
              </div>
            )}

            {/* Ingredients */}
            {p.ingredients && (
              <div className="mb-4">
                <h4 className="font-semibold text-espresso-dark text-sm mb-2">–°–æ—Å—Ç–∞–≤</h4>
                <div className="flex flex-wrap gap-1.5">
                  {p.ingredients.map((ing,j) => <span key={j} className="px-3 py-1.5 bg-foam rounded-full text-xs text-espresso">{ing}</span>)}
                </div>
              </div>
            )}

            {/* Bottom: dynamic price */}
            <div className="flex items-center justify-between mt-4 mb-3">
              <div>
                <span className="text-xs text-espresso/40">–¶–µ–Ω–∞{selOpt && selOpt.mod > 0 ? ' (—Å –æ–ø—Ü–∏–µ–π)' : ''}</span>
                <p className="font-display text-2xl font-bold text-espresso">{fmt(finalPrice)} <span className="text-sm font-normal">UZS</span></p>
                {p.oldPrice && <p className="text-xs text-espresso/30 line-through">{fmt(p.oldPrice)} UZS</p>}
                {selOpt && <p className="text-[11px] text-caramel font-medium mt-0.5">‚úì {selOpt.name}</p>}
              </div>
              <div className="text-xs text-espresso/40">{p.vol}</div>
            </div>
            {p.isAvailable === false ? (
              <button disabled className="w-full py-3.5 bg-espresso/20 text-espresso/40 rounded-xl text-sm font-semibold cursor-not-allowed">–ù–µ—Ç –≤ –Ω–∞–ª–∏—á–∏–∏</button>
            ) : (
              <button onClick={() => { addToCart({...p, price: finalPrice, optName: selOpt?.name}); setSelProduct(null); }} className="w-full py-3.5 btn-espresso text-sm">
                –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É ¬∑ {fmt(finalPrice)} UZS
              </button>
            )}
          </div>
        </div>
      </div>
    );
  };

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // CART MODAL
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  const CartModal = () => {
    if (!showCart) return null;
    return (
      <div className="fixed inset-0 bg-black/50 z-[60] flex items-end sm:items-center justify-center" onClick={() => setShowCart(false)}>
        <div className="bg-cream w-full sm:max-w-md sm:rounded-2xl rounded-t-3xl max-h-[80vh] overflow-hidden anim-su" onClick={e => e.stopPropagation()}>
          <div className="p-4 border-b border-espresso/[.08]">
            <div className="w-10 h-1 bg-espresso/20 rounded-full mx-auto mb-3 sm:hidden" />
            <div className="flex items-center justify-between"><h2 className="font-display text-xl text-espresso-dark">–ö–æ—Ä–∑–∏–Ω–∞</h2><button onClick={() => setShowCart(false)}><Ic.x s={22} c="text-espresso/40"/></button></div>
          </div>
          <div className="overflow-y-auto max-h-[40vh] p-4">
            {cart.length===0 ? (
              <div className="text-center py-8"><div className="text-4xl mb-3">üõí</div><p className="text-espresso/50">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p></div>
            ) : cart.map(it => (
              <div key={it.id} className="flex items-center gap-3 py-3 border-b border-espresso/[.06] last:border-0">
                <div className="w-14 h-14 bg-foam rounded-xl flex items-center justify-center text-2xl flex-shrink-0 overflow-hidden">
                  {it.img ? <img src={it.img} alt={it.name} className="w-full h-full object-cover rounded-xl"/> : it.emoji}
                </div>
                <div className="flex-1 min-w-0"><p className="font-semibold text-sm text-espresso-dark truncate">{it.name}</p><p className="price-tag text-sm">{fmt(it.price)} UZS</p></div>
                <div className="flex items-center gap-1.5">
                  <button onClick={() => rmFromCart(it.id)} className="w-7 h-7 bg-foam rounded-lg flex items-center justify-center"><Ic.minus s={14}/></button>
                  <span className="w-5 text-center text-sm font-semibold">{it.qty}</span>
                  <button onClick={() => addToCart(it)} className="w-7 h-7 bg-espresso rounded-lg flex items-center justify-center text-cream"><Ic.plus s={14}/></button>
                </div>
              </div>
            ))}
          </div>
          {cart.length > 0 && (
            <div className="p-4 border-t border-espresso/[.08]">
              <div className="flex items-center justify-between mb-3"><span className="text-espresso/50">–ò—Ç–æ–≥–æ:</span><span className="font-display text-2xl font-bold text-espresso-dark">{fmt(cartTotal)} UZS</span></div>
              <div className="flex items-center justify-between p-3 bg-mint-light rounded-xl mb-3"><div className="flex items-center gap-2"><Ic.sparkle s={18} c="text-mint"/> <span className="text-sm text-emerald-700">–í—ã –ø–æ–ª—É—á–∏—Ç–µ</span></div><span className="font-bold text-emerald-600">+{Math.floor(cartTotal/500)} –±–∞–ª–ª–æ–≤</span></div>
              <button onClick={() => { setShowCart(false); alert('–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω! üéâ –ü–æ–¥–æ–π–¥–∏—Ç–µ –∫ –±–ª–∏–∂–∞–π—à–µ–º—É –∞–≤—Ç–æ–º–∞—Ç—É –∏ –∑–∞–±–µ—Ä–∏—Ç–µ –∑–∞–∫–∞–∑.'); setCart([]); }} className="w-full py-3.5 btn-espresso text-sm">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
            </div>
          )}
        </div>
      </div>
    );
  };

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // MACHINE MODAL
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  const MachineModal = () => {
    const [showSpecs, setShowSpecs] = useState(false);
    const [machMenuTab, setMachMenuTab] = useState('hot');
    if (!selMachine) return null;
    const m = selMachine;
    const mt = machineTypes.find(t => t.id === m.typeId) || machineTypes[0];
    const mProducts = m.productIds ? products.filter(p => m.productIds.includes(p.id)) : [];
    const hotItems = mProducts.filter(p => p.temp==='hot' || (p.options && p.options.some(o => o.temp==='hot')));
    const coldItems = mProducts.filter(p => p.temp==='cold' || p.temp==='ice' || (p.options && p.options.some(o => o.temp==='cold' || o.temp==='ice')));
    const snackItems = mProducts.filter(p => p.cat==='snack');

    return (
      <div className="fixed inset-0 bg-black/50 z-[60] flex items-end sm:items-center justify-center" onClick={() => setSelMachine(null)}>
        <div className="bg-cream w-full sm:max-w-md sm:rounded-2xl rounded-t-3xl max-h-[88vh] overflow-y-auto anim-su" onClick={e => e.stopPropagation()}>
          {/* Header with machine type image */}
          <div className="bg-gradient-to-br from-espresso to-espresso-dark p-5 sm:rounded-t-2xl rounded-t-3xl relative overflow-hidden">
            <div className="absolute -right-4 -bottom-4 w-32 h-32 opacity-20">
              {mt.img && <img src={mt.img} alt="" className="w-full h-full object-contain"/>}
            </div>
            <div className="relative">
              <div className="flex items-center justify-between mb-3">
                <span className="px-2.5 py-1 bg-white/10 rounded-full text-xs text-white/70 font-medium">{mt.emoji} {mt.name}</span>
                <button onClick={() => setSelMachine(null)} className="text-white/60 hover:text-white"><Ic.x s={22}/></button>
              </div>
              <div className="flex items-start gap-3">
                <div className="w-14 h-14 bg-white/10 rounded-2xl flex items-center justify-center overflow-hidden flex-shrink-0">
                  {mt.img ? <img src={mt.img} alt="" className="w-full h-full object-cover rounded-2xl"/> : <span className="text-2xl">{mt.emoji}</span>}
                </div>
                <div className="text-white flex-1 min-w-0">
                  <h2 className="font-display text-xl leading-tight">{m.name}</h2>
                  <p className="text-white/50 text-sm truncate">{m.addr}, {m.floor}</p>
                  <div className="flex items-center gap-3 mt-2 text-sm flex-wrap">
                    <span className="flex items-center gap-1"><StarFill s={14} c="text-caramel"/> {m.rating} ({m.reviews})</span>
                    <span className="text-white/40">{mProducts.length} –ø–æ–∑–∏—Ü–∏–π</span>
                    {m.is24h && <span className="text-white/40">24/7</span>}
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div className="p-5">
            {/* Status row */}
            <div className="grid grid-cols-3 gap-3 mb-4">
              <div className="text-center"><div className="w-10 h-10 bg-foam rounded-xl mx-auto mb-1 flex items-center justify-center"><span className={`w-3 h-3 rounded-full ${m.status==='online' ? 'bg-mint' : 'bg-espresso/30'}`}/></div><p className="text-[10px] text-espresso/40">–°—Ç–∞—Ç—É—Å</p><p className={`text-xs font-semibold ${m.status==='online' ? 'text-mint' : 'text-espresso/50'}`}>{m.status==='online' ? '–†–∞–±–æ—Ç–∞–µ—Ç' : '–û—Ñ–ª–∞–π–Ω'}</p></div>
              <div className="text-center"><div className="w-10 h-10 bg-foam rounded-xl mx-auto mb-1 flex items-center justify-center text-sm">üìç</div><p className="text-[10px] text-espresso/40">–†–∞—Å—Å—Ç–æ—è–Ω–∏–µ</p><p className="text-xs font-semibold text-espresso-dark">{m.dist} –∫–º</p></div>
              <div className="text-center"><div className="w-10 h-10 bg-foam rounded-xl mx-auto mb-1 flex items-center justify-center text-sm">{m.is24h ? '‚è∞' : 'üïê'}</div><p className="text-[10px] text-espresso/40">–í—Ä–µ–º—è</p><p className="text-xs font-semibold text-espresso-dark">{m.is24h ? '24/7' : '08:00-22:00'}</p></div>
            </div>

            {/* Machine Type Specs ‚Äî accordion */}
            <button onClick={() => setShowSpecs(!showSpecs)}
              className="w-full flex items-center justify-between p-3 bg-foam rounded-xl mb-4 hover:bg-espresso-50/80 transition-colors">
              <div className="flex items-center gap-2">
                <span className="text-lg">{mt.emoji}</span>
                <div className="text-left">
                  <p className="text-sm font-semibold text-espresso-dark">{mt.name}</p>
                  <p className="text-[11px] text-espresso/50">{mt.desc}</p>
                </div>
              </div>
              <Ic.chevD s={16} c={`text-espresso/40 transition-transform ${showSpecs ? 'rotate-180' : ''}`}/>
            </button>
            {showSpecs && (
              <div className="mb-4 anim-fi">
                <div className="grid grid-cols-2 gap-2">
                  {mt.specs.map((s,i) => (
                    <div key={i} className="p-2.5 bg-foam rounded-lg">
                      <p className="text-[10px] text-espresso/40 font-medium mb-0.5">{s.label}</p>
                      <p className="text-xs text-espresso-dark font-semibold">{s.value}</p>
                    </div>
                  ))}
                </div>
              </div>
            )}

            {/* Vendify-style Menu: hot/cold tabs */}
            {mProducts.length > 0 && (
              <div>
                <h3 className="font-semibold text-espresso-dark text-sm mb-3">–ú–µ–Ω—é –∞–≤—Ç–æ–º–∞—Ç–∞</h3>
                {/* Temperature tabs */}
                <div className="flex gap-2 mb-3">
                  {hotItems.length > 0 && (
                    <button onClick={() => setMachMenuTab('hot')}
                      className={`flex items-center gap-1.5 px-3.5 py-2 rounded-full text-sm font-medium border transition-all ${
                        machMenuTab==='hot' ? 'bg-gradient-to-r from-red-500 to-orange-500 text-white border-red-400 shadow-lg shadow-red-500/20' : 'bg-white text-espresso border-espresso/15'
                      }`}>
                      ‚òï –ì–æ—Ä—è—á–∏–µ <span className={`text-[10px] px-1.5 py-0.5 rounded-full ${machMenuTab==='hot' ? 'bg-white/20' : 'bg-espresso/10'}`}>{hotItems.length}</span>
                    </button>
                  )}
                  {coldItems.length > 0 && (
                    <button onClick={() => setMachMenuTab('cold')}
                      className={`flex items-center gap-1.5 px-3.5 py-2 rounded-full text-sm font-medium border transition-all ${
                        machMenuTab==='cold' ? 'bg-gradient-to-r from-blue-500 to-cyan-500 text-white border-blue-400 shadow-lg shadow-blue-500/20' : 'bg-white text-espresso border-espresso/15'
                      }`}>
                      üßä –•–æ–ª–æ–¥–Ω—ã–µ <span className={`text-[10px] px-1.5 py-0.5 rounded-full ${machMenuTab==='cold' ? 'bg-white/20' : 'bg-espresso/10'}`}>{coldItems.length}</span>
                    </button>
                  )}
                  {snackItems.length > 0 && (
                    <button onClick={() => setMachMenuTab('snack')}
                      className={`flex items-center gap-1.5 px-3.5 py-2 rounded-full text-sm font-medium border transition-all ${
                        machMenuTab==='snack' ? 'bg-espresso-dark text-cream border-espresso-dark shadow' : 'bg-white text-espresso border-espresso/15'
                      }`}>
                      ü•ê –°–Ω—ç–∫–∏ <span className={`text-[10px] px-1.5 py-0.5 rounded-full ${machMenuTab==='snack' ? 'bg-white/20' : 'bg-espresso/10'}`}>{snackItems.length}</span>
                    </button>
                  )}
                </div>

                {/* Product list */}
                <div className="space-y-2 max-h-60 overflow-y-auto scrollbar-hide">
                  {(machMenuTab==='hot' ? hotItems : machMenuTab==='cold' ? coldItems : snackItems).map(p => {
                    const opts = p.options ? p.options.filter(o => machMenuTab==='hot' ? o.temp==='hot' : machMenuTab==='cold' ? (o.temp==='cold' || o.temp==='ice') : true) : [];
                    return (
                      <div key={p.id} className={`p-3 rounded-xl border transition-all cursor-pointer hover:shadow-sm ${
                        machMenuTab==='hot' ? 'bg-orange-50/50 border-orange-200/40 hover:border-orange-300/60'
                        : machMenuTab==='cold' ? 'bg-blue-50/50 border-blue-200/40 hover:border-blue-300/60'
                        : 'bg-foam border-espresso/10 hover:border-espresso/20'
                      }`} onClick={() => { setSelMachine(null); setSelProduct(p); }}>
                        <div className="flex items-center justify-between mb-1">
                          <div className="flex items-center gap-2">
                            <span className="text-lg">{p.emoji}</span>
                            <span className="font-semibold text-sm text-espresso-dark">{p.name}</span>
                          </div>
                          <span className="price-tag text-sm">{fmt(p.price)} <span className="text-[10px] text-espresso/40">UZS</span></span>
                        </div>
                        {opts.length > 0 && (
                          <div className="space-y-1 mt-1.5 pl-7">
                            {opts.map(o => (
                              <div key={o.id} className={`flex items-center justify-between px-2.5 py-1.5 rounded-lg border text-[11px] ${
                                machMenuTab==='hot' ? 'bg-white border-orange-200/50' : 'bg-white border-blue-200/50'
                              }`}>
                                <span className="text-espresso-dark font-medium">{o.name}</span>
                                <span className={`font-bold whitespace-nowrap ml-2 ${machMenuTab==='hot' ? 'text-orange-600' : 'text-blue-600'}`}>{fmt(p.price + o.mod)} UZS</span>
                              </div>
                            ))}
                          </div>
                        )}
                      </div>
                    );
                  })}
                </div>
              </div>
            )}

            <button onClick={() => { setSelMachine(null); go('menu'); }} className="w-full py-3 btn-caramel text-sm mt-4">–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å—ë –º–µ–Ω—é</button>
          </div>
        </div>
      </div>
    );
  };

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // FOOTER
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  const Footer = () => (
    <footer className="bg-espresso-dark text-espresso-50/50 py-10 px-4">
      <div className="max-w-6xl mx-auto">
        <div className="grid sm:grid-cols-3 gap-8 mb-8">
          <div>
            <div className="flex items-center gap-2 mb-3">
              <img src="images/opt/vendhub-logo.png" alt="VendHub" className="w-9 h-9 rounded-xl"/>
              <div className="font-display text-white text-lg">VendHub</div>
            </div>
            <p className="text-sm leading-relaxed text-white/40">–ö–æ—Ñ–µ –∏–∑ –≤–µ–Ω–¥–∏–Ω–≥–æ–≤—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤ –≤ –ø–∞—Ä—É –∫–ª–∏–∫–æ–≤. –¢–∞—à–∫–µ–Ω—Ç.</p>
          </div>
          <div><h4 className="text-caramel font-semibold text-sm mb-3">–ù–∞–≤–∏–≥–∞—Ü–∏—è</h4><div className="space-y-2">{navItems.map(n => <button key={n.id} onClick={() => go(n.id)} className="block text-sm text-white/40 hover:text-white">{n.label}</button>)}</div></div>
          <div>
            <h4 className="text-caramel font-semibold text-sm mb-3">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
            <div className="space-y-2 text-sm text-white/40 mb-4"><p>üìç –¢–∞—à–∫–µ–Ω—Ç, –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω</p><p>üìû +998 71 200 39 99</p><p>üìß info@vendhub.uz</p><p>‚è∞ 24/7 –ø–æ–¥–¥–µ—Ä–∂–∫–∞</p></div>
            <h4 className="text-caramel font-semibold text-sm mb-2">–ú—ã –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö</h4>
            <div className="flex gap-2">
              {[
                {name:'Telegram', emoji:'üí¨', color:'bg-[#229ED9]/20 hover:bg-[#229ED9]/40', href:'https://t.me/vendhub_support'},
                {name:'Instagram', emoji:'üì∏', color:'bg-[#E4405F]/20 hover:bg-[#E4405F]/40', href:'https://instagram.com/vendhub.uz'},
                {name:'YouTube', emoji:'‚ñ∂Ô∏è', color:'bg-[#FF0000]/20 hover:bg-[#FF0000]/40', href:'https://youtube.com/@vendhub'},
              ].map(s => (
                <a key={s.name} href={s.href} target="_blank" rel="noopener noreferrer" className={`w-9 h-9 rounded-xl ${s.color} flex items-center justify-center text-sm transition-colors`} title={s.name}>{s.emoji}</a>
              ))}
            </div>
          </div>
        </div>
        <div className="border-t border-white/10 pt-6 flex flex-col sm:flex-row items-center justify-between gap-3">
          <span className="text-xs text-white/30">&copy; VendHub {new Date().getFullYear()}. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</span>
          <div className="flex gap-4 text-xs text-white/30">
            <span className="hover:text-white/50 cursor-pointer">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</span>
            <span className="hover:text-white/50 cursor-pointer">–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</span>
          </div>
        </div>
      </div>
    </footer>
  );

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // FLOATING CART
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  const FloatingCart = () => {
    if (cartCount===0) return null;
    return (
      <button onClick={() => setShowCart(true)}
        className="fixed bottom-6 right-6 z-40 flex items-center gap-3 px-5 py-3 rounded-2xl shadow-xl lg:hidden"
        style={{background:'linear-gradient(135deg, #5D4037 0%, #3E2723 100%)', color:'#FDF8F3', boxShadow:'0 8px 32px -4px rgba(62,39,35,.4)'}}>
        <div className="relative"><Ic.bag s={20}/><span className="absolute -top-2 -right-2 w-5 h-5 bg-caramel rounded-full text-[10px] font-bold flex items-center justify-center text-espresso-dark">{cartCount}</span></div>
        <div className="text-left"><div className="text-sm font-semibold">{cartCount} —Ç–æ–≤–∞—Ä–æ–≤</div><div className="text-xs text-white/60">{fmt(cartTotal)} UZS</div></div>
      </button>
    );
  };

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // RENDER
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  const R = () => {
    switch(sec) {
      case 'home': return <Home/>;
      case 'map': return <Map/>;
      case 'menu': return <Menu/>;
      case 'loyalty': return <Loyalty/>;
      case 'promo': return <Promo/>;
      case 'partner': return <Partner/>;
      case 'about': return <About/>;
      default: return <Home/>;
    }
  };

  return (
    <div className="min-h-screen bg-cream">
      <Header />
      <R />
      <Footer />
      <FloatingCart />
      <ProductModal />
      <CartModal />
      <MachineModal />
    </div>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>
