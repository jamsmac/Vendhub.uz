# 19 — Технические проблемы и архитектурный долг

## Критические

### 1. Нет бэкенда / API
- Все данные захардкожены в JS-файле
- Нет CRUD для товаров, автоматов, акций
- Нет реального управления ценами
- Решение: tRPC API + Drizzle ORM (VHM24 стек)

### 2. Нет авторизации
- Нет Telegram Auth
- Нет профиля пользователя
- Нет истории заказов
- Нет реального баланса бонусов
- Решение: Telegram Mini App auth

### 3. Нет реальной оплаты
- alert() при оформлении заказа
- Нет Payme/Click/Uzum интеграции
- Нет фискализации
- Решение: платёжный модуль VHM24

### 4. Babel в браузере
- JSX компилируется на лету — медленно
- Блокирует рендер
- Решение: предварительная компиляция (Vite/Next.js)

## Серьёзные

### 5. Нет роутинга
- SPA без URL-маршрутов
- Нельзя поделиться ссылкой на страницу
- Нет кнопки "назад" в браузере
- Решение: React Router или Next.js pages

### 6. Нет сохранения состояния
- Корзина теряется при перезагрузке
- Избранное теряется
- Нет localStorage/sessionStorage
- Решение: localStorage + синхронизация с API

### 7. Нет реальной карты
- SVG-заглушка вместо карты
- Координаты в % — не реальные
- Нет маршрутов
- Решение: Yandex Maps API / OpenStreetMap

### 8. Изображения
- Локальные пути (images/opt/...)
- Не работают без сервера
- Дубликаты (cappuccino-card.jpg для 6+ товаров)
- Нет lazy loading (атрибут есть не у всех)
- Решение: CDN + уникальные фото + optimized images

## Средние

### 9. Нет SEO
- SPA-рендеринг только на клиенте
- Нет meta-тегов (кроме viewport и charset)
- Нет Open Graph / Twitter Cards
- Нет sitemap, robots.txt
- Решение: SSR/SSG (Next.js)

### 10. Нет аналитики
- Нет Google Analytics / Yandex Metrika
- Нет отслеживания конверсий
- Нет A/B тестирования
- Решение: GA4 + Yandex Metrika

### 11. Нет PWA
- Нет service worker
- Нет manifest.json
- Нет offline-режима
- Решение: PWA или Telegram Mini App

### 12. Нет i18n
- Все тексты захардкожены на русском
- Нет переключателя языка
- Решение: i18next или аналог

### 13. Доступность (a11y)
- Нет aria-labels
- Нет keyboard navigation
- Нет focus-visible
- Контраст текста сомнителен (text-white/40)
- Решение: WCAG AA compliance

### 14. Performance
- 3 CDN-скрипта (React, ReactDOM, Babel) — блокируют загрузку
- Один огромный компонент App (~1500 строк)
- Нет code splitting
- Нет мемоизации (React.memo, useMemo, useCallback)
- Решение: сборка + разделение на модули

---

## Рекомендации по миграции

### Вариант A: Telegram Mini App (приоритетный)
- Telegram Auth → профиль, баланс, история
- Встроенные платежи Telegram
- Push-уведомления через бот
- Геолокация через Telegram API

### Вариант B: PWA с Next.js
- SSR/SSG для SEO
- API Routes для бэкенда
- Offline-first
- Install prompt

### Вариант C: Оставить как есть + API
- Подключить API к текущему SPA
- Добавить localStorage для состояния
- Заменить карту на Yandex Maps
- Минимальные изменения
