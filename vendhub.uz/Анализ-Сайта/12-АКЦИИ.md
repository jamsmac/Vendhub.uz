# 12 — Акции и промокоды (секция «Выгода» → вкладка «Акции»)

## ✅ РЕШЕНИЕ: Объединить с Бонусами в секцию «Выгода»

Секция «Выгода» содержит 2 вкладки:
- **Акции** — промо-предложения, промокоды (этот файл)
- **Бонусы** — программа лояльности (см. `11-ЛОЯЛЬНОСТЬ.md`)

## Актуальные данные промокодов (из v2.0)

### 3 типа промокодов
1. **Процентный** — COFFEE20 → −20%
2. **Фиксированный** — SAVE5K → −5 000 UZS
3. **Бесплатный товар** — FREELATTE → латте 0 UZS

### Порядок применения скидок
```
subtotal = сумма товаров по basePrice
afterLevelDiscount = subtotal × (1 − levelDiscount%)
afterPromoDiscount = применить промокод к afterLevelDiscount
afterPointsDeduction = afterPromoDiscount − pointsUsed
total = max(afterPointsDeduction, 0)
```

### Правила
- 1 промокод на заказ
- 1 использование на пользователя
- НЕ стекается с другими промо
- СТЕКАЕТСЯ со скидкой уровня

---

## Текущее состояние сайта (что есть)

### Заголовок
- "Акции и предложения"
- ~~"6 активных предложений"~~ → **"4 активных предложения"** (убраны 2 несуществующих напитка)

### Фильтры (6 пилюль)
Все | Скидки | Комбо | Happy Hour | Бонусы | Новинки

### Карточки акций (6)

#### 1. Скидка 20% на всё меню
- Тип: `discount`
- Badge: "Популярное"
- Gradient: red → rose
- Промокод: COFFEE20 (кнопка копирования)
- До: 15 янв
- Условия: Все напитки / Не суммируется / Один раз

#### 2. Комбо: Капучино + Круассан
- Тип: `combo`
- Badge: "Выгодно"
- Gradient: purple → violet
- Цена: ~~45 000~~ → **30 000** UZS
- До: 31 янв
- Условия: Капучино 300мл / Круассан / Все автоматы

#### 3. Happy Hour: -30%
- Тип: `happy_hour`
- Badge: "Ежедневно"
- Gradient: blue → indigo
- До: Ежедневно
- Условия: Только холодные / 14:00-16:00 / Все автоматы

#### 4. x2 бонусов за первый заказ
- Тип: `bonus`
- Badge: "Новичкам"
- Gradient: amber → orange
- Промокод: WELCOME
- До: Постоянно
- Условия: Новые пользователи / Первые 3 заказа / Автоматически

#### ~~5. Новинка: Раф Лаванда~~ → **УДАЛИТЬ** (напиток не существует)
#### ~~6. Зимний сезон: Пряный Латте~~ → **УДАЛИТЬ** (напиток не существует)

### UI-паттерн карточки
- Верхняя часть: gradient + badge + заголовок + цены
- Нижняя: описание + срок + промокод + раскрывающиеся условия

---

## Что нужно решить

### Даты
- [ ] "15 янв", "31 янв", "20 янв" — какого года? Актуальны ли?
- [ ] Нет механизма скрытия просроченных акций
- [ ] "Ежедневно" и "Постоянно" — нужны ли сроки?

### Контент
- [ ] Все акции захардкожены — нужно ли управление через CMS/админку?
- [ ] Промокоды (COFFEE20, WELCOME) — работают ли? Где вводить?
- [ ] Нет кнопки "Активировать" / "Использовать" на карточке
- [ ] Нет связи между акцией и товарами (нельзя перейти к товару)

### Цены
- [ ] Раф Лаванда: в каталоге 28К, в акции 35К→28К. Старая цена отличается от каталога
- [ ] Пряный Латте: в каталоге 25К, в акции 32К→25К. Та же проблема
- [ ] Комбо 30К за Капучино(20К)+Круассан(12К) = 32К, а не 45К. Откуда 45К?

### UX
- [ ] Нет push-уведомлений о новых акциях
- [ ] Нет подписки на акции
- [ ] Нет персональных предложений
- [ ] Нет таймера обратного отсчёта для срочных акций
- [ ] Нет кнопки "Поделиться"

### Дизайн
- [ ] 6 разных gradient-цветов — не пестро ли?
- [ ] Grid 2 колонки — достаточно ли?
- [ ] Промокод — при клике копируется? Нужна ли toast "Скопировано"?
